!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("olPlot",[],e):"object"==typeof exports?exports.olPlot=e():t.olPlot=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=142)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TEXTAREA="TextArea",e.ARC="Arc",e.CURVE="Curve",e.GATHERING_PLACE="GatheringPlace",e.POLYLINE="Polyline",e.FREEHANDLINE="FreeHandLine",e.POINT="Point",e.PENNANT="Pennant",e.RECTANGLE="RectAngle",e.CIRCLE="Circle",e.ELLIPSE="Ellipse",e.LUNE="Lune",e.SECTOR="Sector",e.CLOSED_CURVE="ClosedCurve",e.POLYGON="Polygon",e.FREE_POLYGON="FreePolygon",e.ATTACK_ARROW="AttackArrow",e.DOUBLE_ARROW="DoubleArrow",e.STRAIGHT_ARROW="StraightArrow",e.FINE_ARROW="FineArrow",e.ASSAULT_DIRECTION="AssaultDirection",e.TAILED_SQUAD_COMBAT="TailedSquadCombat",e.TAILED_ATTACK_ARROW="TailedAttackArrow",e.SQUAD_COMBAT="SquadCombat",e.RECTFLAG="RectFlag",e.TRIANGLEFLAG="TriangleFlag",e.CURVEFLAG="CurveFlag"},function(t,e,n){"use strict";var o=n(6);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQuadricBSplineFactor=e.getQBSplinePoints=e.getBinomialFactor=e.getFactorial=e.getBezierPoints=e.getCurvePoints=e.getRightMostControlPoint=e.getLeftMostControlPoint=e.getNormal=e.getBisectorNormals=e.getArcPoints=e.inherits=e.getThirdPoint=e.getCubicValue=e.getPointOnLine=e.isClockWise=e.getAngleOfThreePoints=e.getAzimuth=e.getIntersectPoint=e.getCircleCenterOfThreePoints=e.Mid=e.getBaseLength=e.wholeDistance=e.MathDistance=void 0;var o=n(4),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),i=e.MathDistance=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},a=e.wholeDistance=function(t){var e=0;return t&&Array.isArray(t)&&t.length>0&&t.forEach(function(n,o){o<t.length-1&&(e+=i(n,t[o+1]))}),e},s=(e.getBaseLength=function(t){return Math.pow(a(t),.99)},e.Mid=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}),u=(e.getCircleCenterOfThreePoints=function(t,e,n){var o=[(t[0]+e[0])/2,(t[1]+e[1])/2],r=[o[0]-t[1]+e[1],o[1]+t[0]-e[0]],i=[(t[0]+n[0])/2,(t[1]+n[1])/2],a=[i[0]-t[1]+n[1],i[1]+t[0]-n[0]];return u(o,r,i,a)},e.getIntersectPoint=function(t,e,n,o){if(t[1]===e[1]){return[(o[0]-n[0])/(o[1]-n[1])*(t[1]-n[1])+n[0],t[1]]}if(n[1]===o[1]){return[(e[0]-t[0])/(e[1]-t[1])*(n[1]-t[1])+t[0],n[1]]}var r=(e[0]-t[0])/(e[1]-t[1]),i=(o[0]-n[0])/(o[1]-n[1]),a=(r*t[1]-t[0]-i*n[1]+n[0])/(r-i);return[r*a-r*t[1]+t[0],a]}),l=e.getAzimuth=function(t,e){var n=void 0,o=Math.asin(Math.abs(e[1]-t[1])/i(t,e));return e[1]>=t[1]&&e[0]>=t[0]?n=o+Math.PI:e[1]>=t[1]&&e[0]<t[0]?n=2*Math.PI-o:e[1]<t[1]&&e[0]<t[0]?n=o:e[1]<t[1]&&e[0]>=t[0]&&(n=Math.PI-o),n},c=(e.getAngleOfThreePoints=function(t,e,n){var o=l(e,t)-l(e,n);return o<0?o+2*Math.PI:o},e.isClockWise=function(t,e,n){return(n[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(n[0]-t[0])}),f=(e.getPointOnLine=function(t,e,n){return[e[0]+t*(n[0]-e[0]),e[1]+t*(n[1]-e[1])]},e.getCubicValue=function(t,e,n,o,r){t=Math.max(Math.min(t,1),0);var i=1-t,a=t*t,s=a*t,u=i*i,l=u*i;return[l*e[0]+3*u*t*n[0]+3*i*a*o[0]+s*r[0],l*e[1]+3*u*t*n[1]+3*i*a*o[1]+s*r[1]]}),h=(e.getThirdPoint=function(t,e,n,o,r){var i=l(t,e),a=r?i+n:i-n,s=o*Math.cos(a),u=o*Math.sin(a);return[e[0]+s,e[1]+u]},e.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,o){var r=Array.prototype.slice.call(arguments,2);return e.prototype[n].apply(t,r)}},e.getArcPoints=function(t,e,n,o){var r=null,i=null,a=[],s=o-n;s=s<0?s+2*Math.PI:s;for(var u=0;u<=100;u++){var l=n+s*u/100;r=t[0]+e*Math.cos(l),i=t[1]+e*Math.sin(l),a.push([r,i])}return a},e.getBisectorNormals=function(t,e,n,o){var a=p(e,n,o),s=null,u=null,l=null,f=null,h=null,d=Math.sqrt(a[0]*a[0]+a[1]*a[1]),y=a[0]/d,g=a[1]/d,v=i(e,n),m=i(n,o);return d>r.ZERO_TOLERANCE?c(e,n,o)?(l=t*v,f=n[0]-l*g,h=n[1]+l*y,s=[f,h],l=t*m,f=n[0]+l*g,h=n[1]-l*y,u=[f,h]):(l=t*v,f=n[0]+l*g,h=n[1]-l*y,s=[f,h],l=t*m,f=n[0]-l*g,h=n[1]+l*y,u=[f,h]):(f=n[0]+t*(e[0]-n[0]),h=n[1]+t*(e[1]-n[1]),s=[f,h],f=n[0]+t*(o[0]-n[0]),h=n[1]+t*(o[1]-n[1]),u=[f,h]),[s,u]}),p=e.getNormal=function(t,e,n){var o=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(o*o+r*r);o/=i,r/=i;var a=n[0]-e[0],s=n[1]-e[1],u=Math.sqrt(a*a+s*s);return a/=u,s/=u,[o+a,r+s]},d=e.getLeftMostControlPoint=function(t,e){var n=[t[0],t[1],t[2],null,null],o=n[0],a=n[1],u=n[2],l=n[3],c=n[4],f=h(0,o,a,u),d=f[0],y=p(o,a,u);if(Math.sqrt(y[0]*y[0]+y[1]*y[1])>r.ZERO_TOLERANCE){var g=s(o,a),v=o[0]-g[0],m=o[1]-g[1],b=i(o,a),w=2/b,P=-w*m,_=w*v,O=P*P-_*_,k=2*P*_,x=_*_-P*P,E=d[0]-g[0],T=d[1]-g[1];l=g[0]+O*E+k*T,c=g[1]+k*E+x*T}else l=o[0]+e*(a[0]-o[0]),c=o[1]+e*(a[1]-o[1]);return[l,c]},y=e.getRightMostControlPoint=function(t,e){var n=t.length,o=t[n-3],a=t[n-2],u=t[n-1],l=h(0,o,a,u),c=l[1],f=p(o,a,u),d=Math.sqrt(f[0]*f[0]+f[1]*f[1]),y=null,g=null;if(d>r.ZERO_TOLERANCE){var v=s(a,u),m=u[0]-v[0],b=u[1]-v[1],w=i(a,u),P=2/w,_=-P*b,O=P*m,k=_*_-O*O,x=2*_*O,E=O*O-_*_,T=c[0]-v[0],C=c[1]-v[1];y=v[0]+k*T+x*C,g=v[1]+x*T+E*C}else y=u[0]+e*(a[0]-u[0]),g=u[1]+e*(a[1]-u[1]);return[y,g]},g=(e.getCurvePoints=function(t,e){for(var n=d(e,t),o=null,i=null,a=null,s=[n],u=[],l=0;l<e.length-2;l++){var c=[e[l],e[l+1],e[l+2]];o=c[0],i=c[1],a=c[2];var p=h(t,o,i,a);s=s.concat(p)}var g=y(e,t);g&&s.push(g);for(var v=0;v<e.length-1;v++){o=e[v],i=e[v+1],u.push(o);for(var m=0;m<r.FITTING_COUNT;m++){var b=f(m/r.FITTING_COUNT,o,s[2*v],s[2*v+1],i);u.push(b)}u.push(i)}return u},e.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=[],n=t.length-1,o=0;o<=1;o+=.01){for(var r=0,i=0,a=0;a<=n;a++){var s=v(n,a),u=Math.pow(o,a),l=Math.pow(1-o,n-a);r+=s*u*l*t[a][0],i+=s*u*l*t[a][1]}e.push([r,i])}return e.push(t[n]),e},e.getFactorial=function(t){var e=1;switch(t){case t<=1:e=1;break;case 2===t:e=2;break;case 3===t:e=6;break;case 24===t:e=24;break;case 5===t:e=120;break;default:for(var n=1;n<=t;n++)e*=n}return e}),v=e.getBinomialFactor=function(t,e){return g(t)/(g(e)*g(t-e))},m=(e.getQBSplinePoints=function(t){if(t.length<=2)return t;var e=[],n=t.length-2-1;e.push(t[0]);for(var o=0;o<=n;o++)for(var r=0;r<=1;r+=.05){for(var i=0,a=0,s=0;s<=2;s++){var u=m(s,r);i+=u*t[o+s][0],a+=u*t[o+s][1]}e.push([i,a])}return e.push(t[t.length-1]),e},e.getQuadricBSplineFactor=function(t,e){var n=0;return 0===t?n=Math.pow(e-1,2)/2:1===t?n=(-2*Math.pow(e,2)+2*e+1)/2:2===t&&(n=Math.pow(e,2)/2),n})},function(t,e,n){"use strict";var o=n(5),r=n(10),i=n(13),a=n(14),s=n(21),u=function t(e,n,u){var l,c,f,h,p=e&t.F,d=e&t.G,y=e&t.S,g=e&t.P,v=e&t.B,m=d?o:y?o[n]||(o[n]={}):(o[n]||{}).prototype,b=d?r:r[n]||(r[n]={}),w=b.prototype||(b.prototype={});d&&(u=n);for(l in u)c=!p&&m&&void 0!==m[l],f=(c?m:u)[l],h=v&&c?s(f,o):g&&"function"==typeof f?s(Function.call,f):f,m&&a(m,l,f,e&t.U),b[l]!=f&&i(b,l,h),g&&w[l]!=f&&(w[l]=f)};o.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FITTING_COUNT=100,e.HALF_PI=Math.PI/2,e.ZERO_TOLERANCE=1e-4,e.TWO_PI=2*Math.PI,e.BASE_LAYERNAME="ol-plot-vector-layer",e.BASE_HELP_CONTROL_POINT_ID="plot-helper-control-point-div",e.BASE_HELP_HIDDEN="plot-helper-hidden-div",e.DEF_TEXT_STYEL={backgroundColor:"#fff",borderRadius:"2px",boxSizing:"border-box",border:"3px solid rgba(255, 0, 0, 1)",fontFamily:"Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Noto Sans CJK SC,WenQuanYi Micro Hei,Arial,sans-serif",color:"#010500",fontWeight:400,padding:"10px",fontStretch:"normal"}},function(t,e,n){"use strict";var o=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=o)},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":o(t))?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var o=n(38)("wks"),r=n(19),i=n(5).Symbol,a="function"==typeof i;(t.exports=function(t){return o[t]||(o[t]=a&&i[t]||(a?i:r)("Symbol."+t))}).store=o},function(t,e,n){"use strict";var o=n(1),r=n(50),i=n(27),a=Object.defineProperty;e.f=n(11)?Object.defineProperty:function(t,e,n){if(o(t),e=i(e,!0),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var o={}.hasOwnProperty;t.exports=function(t,e){return o.call(t,e)}},function(t,e,n){"use strict";var o=t.exports={version:"2.5.6"};"number"==typeof __e&&(__e=o)},function(t,e,n){"use strict";t.exports=!n(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var o=n(8),r=n(18);t.exports=n(11)?function(t,e,n){return o.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";var o=n(5),r=n(13),i=n(9),a=n(19)("src"),s=Function.toString,u=(""+s).split("toString");n(10).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(i(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(i(n,a)||r(n,a,t[e]?""+t[e]:u.join(String(e)))),t===o?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){"use strict";var o=n(36),r=n(18),i=n(16),a=n(27),s=n(9),u=n(50),l=Object.getOwnPropertyDescriptor;e.f=n(11)?l:function(t,e){if(t=i(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return r(!o.f.call(t,e),t[e])}},function(t,e,n){"use strict";var o=n(78),r=n(30);t.exports=function(t){return o(r(t))}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var o=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++o+r).toString(36))}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var o=n(20);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";t.exports=!1},function(t,e,n){"use strict";var o=n(1),r=n(83),i=n(31),a=n(37)("IE_PROTO"),s=function(){},u=function(){var t,e=n(48)("iframe"),o=i.length;for(e.style.display="none",n(75).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;o--;)delete u.prototype[i[o]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=o(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){"use strict";var o=n(9),r=n(89),i=n(37)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),o(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var o=n(53),r=n(31);t.exports=Object.keys||function(t){return o(t,r)}},function(t,e,n){"use strict";var o=n(8).f,r=n(9),i=n(7)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var o=n(6);t.exports=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(2),c=o(l),f=n(4),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.ATTACK_ARROW,a.headHeightFactor=.18,a.headWidthFactor=.3,a.neckHeightFactor=.85,a.neckWidthFactor=.15,a.headTailFactor=.8,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),n=[e[0],e[1]],o=n[0],r=n[1];c.isClockWise(e[0],e[1],e[2])&&(o=e[1],r=e[0]);var i=c.Mid(o,r),a=[i].concat(e.slice(2)),s=this.getArrowHeadPoints(a,o,r),u=[s[0],s[4]],l=u[0],f=u[1],h=c.MathDistance(o,r)/c.getBaseLength(a),p=this.getArrowBodyPoints(a,l,f,h),d=p.length,y=[o].concat(p.slice(0,d/2));y.push(l);var g=[r].concat(p.slice(d/2,d));g.push(f),y=c.getQBSplinePoints(y),g=c.getQBSplinePoints(g),this.setCoordinates([y.concat(s,g.reverse())])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,n,o){var r=c.Mid(t,e),i=c.MathDistance(r,n),a=c.getThirdPoint(n,r,0,.3*i,!0),s=c.getThirdPoint(n,r,0,.5*i,!0);a=c.getThirdPoint(r,a,h.HALF_PI,i/5,o),s=c.getThirdPoint(r,s,h.HALF_PI,i/4,o);var u=[r,a,s,n],l=this.getArrowHeadPoints(u);if(!(l&&Array.isArray(l)&&l.length>0))throw new Error("插值出错");var f=[l[0],l[4]],p=f[0],d=f[1],y=c.MathDistance(t,e)/c.getBaseLength(u)/2,g=this.getArrowBodyPoints(u,p,d,y);if(g){var v=g.length,m=g.slice(0,v/2),b=g.slice(v/2,v);return m.push(p),b.push(d),m=m.reverse(),m.push(e),b=b.reverse(),b.push(t),m.reverse().concat(l,b)}}},{key:"getArrowHeadPoints",value:function(t,e,n){try{var o=c.getBaseLength(t),r=o*this.headHeightFactor,i=t[t.length-1];o=c.MathDistance(i,t[t.length-2]);var a=c.MathDistance(e,n);r>a*this.headTailFactor&&(r=a*this.headTailFactor);var s=r*this.headWidthFactor,u=r*this.neckWidthFactor;r=r>o?o:r;var l=r*this.neckHeightFactor,f=c.getThirdPoint(t[t.length-2],i,0,r,!0),p=c.getThirdPoint(t[t.length-2],i,0,l,!0),d=c.getThirdPoint(i,f,h.HALF_PI,s,!1),y=c.getThirdPoint(i,f,h.HALF_PI,s,!0);return[c.getThirdPoint(i,p,h.HALF_PI,u,!1),d,i,y,c.getThirdPoint(i,p,h.HALF_PI,u,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,n,o){for(var r=c.wholeDistance(t),i=c.getBaseLength(t),a=i*o,s=c.MathDistance(e,n),u=(a-s)/2,l=0,f=[],h=[],p=1;p<t.length-1;p++){var d=c.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2;l+=c.MathDistance(t[p-1],t[p]);var y=(a/2-l/r*u)/Math.sin(d),g=c.getThirdPoint(t[p-1],t[p],Math.PI-d,y,!0),v=c.getThirdPoint(t[p-1],t[p],d,y,!1);f.push(g),h.push(v)}return f.concat(h)}},{key:"getTempPoint4",value:function(t,e,n){try{var o=c.Mid(t,e),r=c.MathDistance(o,n),i=c.getAngleOfThreePoints(t,o,n),a=void 0,s=void 0,u=void 0,l=void 0;return i<h.HALF_PI?(s=r*Math.sin(i),u=r*Math.cos(i),l=c.getThirdPoint(t,o,h.HALF_PI,s,!1),a=c.getThirdPoint(o,l,h.HALF_PI,u,!0)):i>=h.HALF_PI&&i<Math.PI?(s=r*Math.sin(Math.PI-i),u=r*Math.cos(Math.PI-i),l=c.getThirdPoint(t,o,h.HALF_PI,s,!1),a=c.getThirdPoint(o,l,h.HALF_PI,u,!1)):i>=Math.PI&&i<1.5*Math.PI?(s=r*Math.sin(i-Math.PI),u=r*Math.cos(i-Math.PI),l=c.getThirdPoint(t,o,h.HALF_PI,s,!0),a=c.getThirdPoint(o,l,h.HALF_PI,u,!0)):(s=r*Math.sin(2*Math.PI-i),u=r*Math.cos(2*Math.PI-i),l=c.getThirdPoint(t,o,h.HALF_PI,s,!0),a=c.getThirdPoint(o,l,h.HALF_PI,u,!1)),a}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";var o={}.toString;t.exports=function(t){return o.call(t).slice(8,-1)}},function(t,e,n){"use strict";t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var o=n(22),r=n(3),i=n(14),a=n(13),s=n(17),u=n(51),l=n(26),c=n(24),f=n(7)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,g,v){u(n,e,d);var m,b,w,P=function(t){if(!h&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},_=e+" Iterator",O="values"==y,k=!1,x=t.prototype,E=x[f]||x["@@iterator"]||y&&x[y],T=E||P(y),C=y?O?P("entries"):T:void 0,S="Array"==e?x.entries||E:E;if(S&&(w=c(S.call(new t)))!==Object.prototype&&w.next&&(l(w,_,!0),o||"function"==typeof w[f]||a(w,f,p)),O&&E&&"values"!==E.name&&(k=!0,T=function(){return E.call(this)}),o&&!v||!h&&!k&&x[f]||a(x,f,T),s[e]=T,s[_]=p,y)if(m={values:O?T:P("values"),keys:g?T:P("keys"),entries:C},v)for(b in m)b in x||i(x,b,m[b]);else r(r.P+r.F*(h||k),e,m);return m}},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(19)("meta"),i=n(6),a=n(9),s=n(8).f,u=0,l=Object.isExtensible||function(){return!0},c=!n(12)(function(){return l(Object.preventExtensions({}))}),f=function(t){s(t,r,{value:{i:"O"+ ++u,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==(void 0===t?"undefined":o(t))?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!l(t))return"F";if(!e)return"E";f(t)}return t[r].i},p=function(t,e){if(!a(t,r)){if(!l(t))return!0;if(!e)return!1;f(t)}return t[r].w},d=function(t){return c&&y.NEED&&l(t)&&!a(t,r)&&f(t),t},y=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:p,onFreeze:d}},function(t,e,n){"use strict";var o=n(53),r=n(31).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},function(t,e,n){"use strict";e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var o=n(38)("keys"),r=n(19);t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e,n){"use strict";var o=n(10),r=n(5),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:n(22)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";var o=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:o)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={CHANGE:"change",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){var n=!0,o=!1,r=void 0;try{for(var i,a=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(!s.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)){var u=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,u)}}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}},i=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=function t(){o(this,t)};for(var a in e){var s=e[a];r(i,s),r(i.prototype,s.prototype)}return i};e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeListener=e.addListener=e.getDomEventKey=e.unlistenAll=e.clear=e.unListenByKey=e.unListen=e.listenOnce=e.listen=e.removeListeners=e.getListenerMap=e.getListeners=e.findListener=e.bindListener=void 0;var o=n(43),r=e.bindListener=function(t){var e=function(e){var n=t.listener,o=t.bindTo||t.target;return t.callOnce&&c(t),n.call(o,e)};return t.boundListener=e,e},i=e.findListener=function(t,e,n,o){for(var r=null,i=0,a=t.length;i<a;++i)if(r=t[i],r.listener===e&&r.bindTo===n)return o&&(r.deleteIndex=i),r},a=e.getListeners=function(t,e){var n=t.vlm;return n?n[e]:void 0},s=e.getListenerMap=function(t){var e=t.vlm;return e||(e=t.vlm={}),e},u=e.removeListeners=function(t,e){var n=a(t,e);if(n){for(var o=0,r=n.length;o<r;++o)t.removeEventListener(e,n[o].boundListener),f(n[o]);n.length=0;var i=t.vlm;i&&(delete i[e],0===Object.keys(i).length&&delete t.vlm)}},l=e.listen=function(t,e,n,o,a){var u=s(t),l=u[e];l||(l=u[e]=[]);var c=i(l,n,o,!1);return c?a||(c.callOnce=!1):(c={bindTo:o,callOnce:!!a,listener:n,target:t,type:e},t.addEventListener(e,r(c)),l.push(c)),c},c=(e.listenOnce=function(t,e,n,o){return l(t,e,n,o,!0)},e.unListen=function(t,e,n,o){var r=a(t,e);if(r){var s=i(r,n,o,!0);s&&c(s)}},e.unListenByKey=function(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=a(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&u(t.target,t.type)}f(t)}}),f=e.clear=function(t){for(var e in t)delete t[e]},h=(e.unlistenAll=function(t){var e=s(t);for(var n in e)u(t,n)},e.getDomEventKey=function(t,e,n){return"_dom_event_"+t+"_"+(0,o.stamp)(e)+(n?"_"+(0,o.stamp)(n):"")});e.addListener=function(t,e,n,o){var r=h(e,n,o),i=t[r];return i?this:(i=function(e){return n.call(o||t,e)},"addEventListener"in t?t.addEventListener(e,i,!1):"attachEvent"in t&&t.attachEvent("on"+e,i),t[r]=i,this)},e.removeListener=function(t,e,n,o){var r=h(e,n,o),i=t[r];return i?("removeEventListener"in t?t.removeEventListener(e,i,!1):"detachEvent"in t&&t.detachEvent("on"+e,i),t[r]=null,this):this}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(e.getrandom=function(t,e,n){t&&!isNaN(t)||(t=0),e&&!isNaN(e)||(e=1),n&&!isNaN(n)||(n=0),n=n>15?15:n;var o=[Math.random()*(e-t)+t,Math.pow(10,n)],r=o[0],i=o[1];return r=Math.round(r*i)/i},e.getuuid=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}),r=(e.stamp=function(t){var e="_event_id_";return t[e]=t[e]||o(),t[e]},e.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")});e.splitWords=function(t){return r(t).split(/\s+/)},e.firstUpperToCase=function(t){return t.toLowerCase().replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()})},e.upperFirstChart=function(t){return t.replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()})},e.arrayRemove=function(t,e){var n=t.indexOf(e),o=n>-1;return o&&t.splice(n,1),o}},function(t,e,n){"use strict";function o(t,e,n,o){switch(t){case 0:return e&n^~e&o;case 1:return e^n^o;case 2:return e&n^e&o^n&o;case 3:return e^n^o}}function r(t,e){return t<<e|t>>>32-e}function i(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var i=unescape(encodeURIComponent(t));t=new Array(i.length);for(var a=0;a<i.length;a++)t[a]=i.charCodeAt(a)}t.push(128);for(var s=t.length/4+2,u=Math.ceil(s/16),l=new Array(u),a=0;a<u;a++){l[a]=new Array(16);for(var c=0;c<16;c++)l[a][c]=t[64*a+4*c]<<24|t[64*a+4*c+1]<<16|t[64*a+4*c+2]<<8|t[64*a+4*c+3]}l[u-1][14]=8*(t.length-1)/Math.pow(2,32),l[u-1][14]=Math.floor(l[u-1][14]),l[u-1][15]=8*(t.length-1)&4294967295;for(var a=0;a<u;a++){for(var f=new Array(80),h=0;h<16;h++)f[h]=l[a][h];for(var h=16;h<80;h++)f[h]=r(f[h-3]^f[h-8]^f[h-14]^f[h-16],1);for(var p=n[0],d=n[1],y=n[2],g=n[3],v=n[4],h=0;h<80;h++){var m=Math.floor(h/20),b=r(p,5)+o(m,d,y,g)+v+e[m]+f[h]>>>0;v=g,g=y,y=r(d,30)>>>0,d=p,p=b}n[0]=n[0]+p>>>0,n[1]=n[1]+d>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}function a(t,e){var n=e||0,o=h;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}function s(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,function(t){e.push(parseInt(t,16))}),e}function u(t){t=unescape(encodeURIComponent(t));for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function l(t,e,n,o){if("string"==typeof t&&(t=u(t)),"string"==typeof e&&(e=s(e)),!Array.isArray(t))throw TypeError("name must be an array of bytes");if(!Array.isArray(e)||16!=e.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var r=f(e.concat(t));return r[6]=15&r[6]|80,r[8]=63&r[8]|128,n||d(r)}Object.defineProperty(e,"__esModule",{value:!0});for(var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=i,h=[],p=0;p<256;++p)h[p]=(p+256).toString(16).substr(1);var d=a;l.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",l.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var y=l,g=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},v=function(t){for(var e=arguments,n=1;n<arguments.length;n++){var o=e[n];for(var r in o)t[r]=o[r]}return t},m=function(){};m.prototype.on=function(t,e,n){var o=this;if(!t||!e)return this;if("object"===(void 0===t?"undefined":c(t)))for(var r in t)o._on(r,t[r],e);else for(var i=g(t).split(/\s+/),a=0,s=i.length;a<s;a++)o._on(i[a],e,n);return this},m.prototype.un=function(t,e,n){var o=this;if(t)if("object"===(void 0===t?"undefined":c(t)))for(var r in t)o._un(r,t[r],e);else for(var i=g(t).split(/\s+/),a=0,s=i.length;a<s;a++)o._un(i[a],e,n);else delete this._events;return this},m.prototype.addEventListener=function(){return this.on.apply(this,arguments)},m.prototype.removeEventListener=function(){return this.un.apply(this,arguments)},m.prototype.once=function(t,e,n){var o=this;if(!t||!e)return this;if("object"===(void 0===t?"undefined":c(t))){for(var r in t)o.once(r,t[r],e);return this}var i=function r(){o.un(t,e,n).un(t,r,n)};return this.on(t,e,n).on(t,i,n)},m.prototype._on=function(t,e,n){var o=this;this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={handler:e,context:n},a=r,s=0,u=a.length;s<u;s++)if(a[s].handler===e&&a[s].context===n)return o;a.push(i)},m.prototype._un=function(t,e,n){var o=this,r=[],i=r[0],a=r[1],s=r[2];if(this._events&&(i=this._events[t])){if(!e){for(a=0,s=i.length;a<s;a++)i[a].callback=function(){return!1};return void delete this._events[t]}if(n===this&&(n=void 0),i)for(a=0,s=i.length;a<s;a++){var u=i[a];if(u.context===n&&u.handler===e)return u.handler=function(){return!1},o._firingCount&&(o._events[t]=i=i.slice()),void i.splice(a,1)}}},m.prototype.dispatch=function(){return this._action.apply(this,arguments)},m.prototype.dispatchSync=function(){var t=arguments,e=this;return setTimeout(function(){e._action.apply(e,t)}),this},m.prototype._action=function(t,e,n){var o=this;if(!this.listens(t,n))return this;var r={type:t,target:this};if(this._events){var i=this._events[t];if(i){this._firingCount=this._firingCount+1||1;for(var a=0,s=i.length;a<s;a++){var u=i[a];u.handler.call(u.context||o,r,e)}this._firingCount--}}return n&&this._propagateEvent(r),this},m.prototype.listens=function(t,e){var n=this,o=this._events&&this._events[t];if(o&&o.length)return!0;if(e)for(var r in n._eventParents)if(n._eventParents[r].listens(t,e))return!0;return!1},m.prototype.addEventParent=function(t){return this._eventParents=this._eventParents||{},this._eventParents[y(t,"8dc079dd-0313-4563-864f-008eb45bf87f")]=t,this},m.prototype.removeEventParent=function(t){return this._eventParents&&delete this._eventParents[y(t,"8dc079dd-0313-4563-864f-008eb45bf87f")],this},m.prototype._propagateEvent=function(t){var e=this;for(var n in e._eventParents)e._eventParents[n].dispatch(t.type,v({layer:t.target,propagatedFrom:t.target},t),!0)},e.default=m,t.exports=e.default},function(t,e,n){"use strict";var o,r,i;!function(n,a){r=[t,e],o=a,void 0!==(i="function"==typeof o?o.apply(e,r):o)&&(t.exports=i)}(0,function(t,e){function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function o(){if(0!==t.scrollHeight){var e=n(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+s+"px",u=t.clientWidth,e.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}}function r(){o();var n=Math.round(parseFloat(t.style.height)),r=window.getComputedStyle(t,null),i="content-box"===r.boxSizing?Math.round(parseFloat(r.height)):t.offsetHeight;if(i<n?"hidden"===r.overflowY&&(e("scroll"),o(),i="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==r.overflowY&&(e("hidden"),o(),i="content-box"===r.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),l!==i){l=i;var s=a("autosize:resized");try{t.dispatchEvent(s)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!i.has(t)){var s=null,u=null,l=null,c=function(){t.clientWidth!==u&&r()},f=function(e){window.removeEventListener("resize",c,!1),t.removeEventListener("input",r,!1),t.removeEventListener("keyup",r,!1),t.removeEventListener("autosize:destroy",f,!1),t.removeEventListener("autosize:update",r,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),i.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",f,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",r,!1),window.addEventListener("resize",c,!1),t.addEventListener("input",r,!1),t.addEventListener("autosize:update",r,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",i.set(t,{destroy:f,update:r}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),s="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(s)&&(s=0),r()}()}}function o(t){var e=i.get(t);e&&e.destroy()}function r(t){var e=i.get(t);e&&e.update()}var i="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,o){-1===t.indexOf(n)&&(t.push(n),e.push(o))},delete:function(n){var o=t.indexOf(n);o>-1&&(t.splice(o,1),e.splice(o,1))}}}(),a=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){a=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(t){return t},s.destroy=function(t){return t},s.update=function(t){return t}):(s=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},s.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t},s.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t}),e.default=s,t.exports=e.default})},function(t,e,n){"use strict";t.exports=function(t,e,n,o){if(!(t instanceof e)||void 0!==o&&o in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var o=n(29),r=n(7)("toStringTag"),i="Arguments"==o(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:i?o(e):"Object"==(s=o(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";var o=n(6),r=n(5).document,i=o(r)&&o(r.createElement);t.exports=function(t){return i?r.createElement(t):{}}},function(t,e,n){"use strict";var o=n(21),r=n(81),i=n(79),a=n(1),s=n(56),u=n(91),l={},c={},f=t.exports=function(t,e,n,f,h){var p,d,y,g,v=h?function(){return t}:u(t),m=o(n,f,e?2:1),b=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(i(v)){for(p=s(t.length);p>b;b++)if((g=e?m(a(d=t[b])[0],d[1]):m(t[b]))===l||g===c)return g}else for(y=v.call(t);!(d=y.next()).done;)if((g=r(y,m,d.value,e))===l||g===c)return g};f.BREAK=l,f.RETURN=c},function(t,e,n){"use strict";t.exports=!n(11)&&!n(12)(function(){return 7!=Object.defineProperty(n(48)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var o=n(23),r=n(18),i=n(26),a={};n(13)(a,n(7)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(a,{next:r(1,n)}),i(t,e+" Iterator")}},function(t,e,n){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var o=n(9),r=n(16),i=n(70)(!1),a=n(37)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,l=[];for(n in s)n!=a&&o(s,n)&&l.push(n);for(;e.length>u;)o(s,n=e[u++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){"use strict";var o=n(14);t.exports=function(t,e,n){for(var r in e)o(t,r,e[r],n);return t}},function(t,e,n){"use strict";var o=n(6),r=n(1),i=function(t,e){if(r(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n(21)(Function.call,n(15).f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:i}},function(t,e,n){"use strict";var o=n(39),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},function(t,e,n){"use strict";var o=n(6);t.exports=function(t,e){if(!o(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";e.f=n(7)},function(t,e,n){"use strict";var o=n(47),r={};r[n(7)("toStringTag")]="z",r+""!="[object z]"&&n(14)(Object.prototype,"toString",function(){return"[object "+o(this)+"]"},!0)},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(2),c=o(l),f=n(4),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.FINE_ARROW,a.tailWidthFactor=.1,a.neckWidthFactor=.2,a.headWidthFactor=.25,a.headAngle=Math.PI/8.5,a.neckAngle=Math.PI/13,a.fixPointCount=2,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],n=e[0],o=e[1],r=c.getBaseLength(t),i=r*this.tailWidthFactor,a=r*this.neckWidthFactor,s=r*this.headWidthFactor,u=c.getThirdPoint(o,n,h.HALF_PI,i,!0),l=c.getThirdPoint(o,n,h.HALF_PI,i,!1),f=c.getThirdPoint(n,o,this.headAngle,s,!1),p=c.getThirdPoint(n,o,this.headAngle,s,!0),d=c.getThirdPoint(n,o,this.neckAngle,a,!1),y=c.getThirdPoint(n,o,this.neckAngle,a,!0),g=[u,d,f,o,p,y,l];this.setCoordinates([g])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),ol.layer.LayerUtils=function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t},ol.layer.LayerUtils.prototype.getLayerByLayerName=function(t){try{var e=null;if(this.map){var n=this.map.getLayers().getArray();e=this.getLayerInternal(n,"layerName",t)}return e}catch(t){console.log(t)}},ol.layer.LayerUtils.prototype.getLayerInternal=function(t,e,n){var o=this,r=null;return t.length>0&&t.every(function(t){if(t instanceof ol.layer.Group){var i=t.getLayers().getArray();return!(r=o.getLayerInternal(i,e,n))}return t.get(e)!==n||(r=t,!1)}),r},ol.layer.LayerUtils.prototype.getLayersArrayInternal=function(t,e,n){var o=this,r=[];return t.length>0&&t.forEach(function(t){if(t instanceof ol.layer.Group){var i=t.getLayers().getArray();r=o.getLayerInternal(i,e,n),r&&r.push(t)}else t.get(e)===n&&r.push(t)}),r},ol.layer.LayerUtils.prototype.getLayerByKeyValue=function(t,e){try{var n=null;if(this.map){var o=this.map.getLayers().getArray();n=this.getLayerInternal(o,t,e)}return n}catch(t){console.log(t)}},ol.layer.LayerUtils.prototype.getLayersArrayByKeyValue=function(t,e){try{var n=[];if(this.map){var o=this.map.getLayers().getArray();n=this.getLayersArrayInternal(o,t,e)}return n}catch(t){console.log(t)}},ol.layer.LayerUtils.prototype.createVectorLayer=function(t,e){try{if(this.map){var n=this.getLayerByLayerName(t);if(n instanceof ol.layer.Vector||(n=null),n||e&&e.create&&(n=new ol.layer.Vector({layerName:t,params:e,layerType:"vector",source:new ol.source.Vector({wrapX:!1}),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(67, 110, 238, 0.4)"}),stroke:new ol.style.Stroke({color:"#7DC826",width:2.5}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})})),this.map&&n){e&&e.hasOwnProperty("selectable")&&n.set("selectable",e.selectable);var o=this.getLayerByLayerName(t);o&&o instanceof ol.layer.Vector||this.map.addLayer(n)}return n}}catch(t){console.log(t)}};var o=ol.layer.LayerUtils;e.default=o,t.exports=e.default},function(t,e,n){"use strict";n(93),n(94),n(95),n(96),n(97),n(100),n(98),n(99),n(101),n(102),n(103),n(104),n(106),n(105),t.exports=n(10).Reflect},function(t,e,n){"use strict";n(59),n(108),n(110),n(107),t.exports=n(10).Set},function(t,e,n){"use strict";n(109),n(59),t.exports=n(10).Symbol},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(41),l=o(u),c=n(2),f=n(40),h=o(f),p=n(0),d=n(44),y=o(d),g=n(42),v=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(g),m=n(4),b=n(141),w=o(b),P=n(134),_=o(P),O=n(61),k=o(O),x=n(140),E=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");return o.map=t,o.options=n||{},o.points=null,o.plot=null,o.feature=null,o.plotType=null,o.plotParams=null,o.mapViewport=o.map.getViewport(),o.dblClickZoomInteraction=null,o.drawOverlay=null,o.layerName=o.options&&o.options.layerName?o.options.layerName:m.BASE_LAYERNAME,o.drawLayer=o.createVectorLayer(o.layerName,{create:!0}),o.styleName=null,y.default.call(o),k.default.call(o,o.map),o}return a(e,t),s(e,[{key:"active",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.disActive(),this.deactiveMapTools(),this.plotType=t,this.plotParams=o,e&&(this.styleName=e),"TextArea"===t){new _.default(this.map,this.drawLayer,o).on("TextAreaDrawEnd",function(t){n.disActive()})}else this.map.on("click",this.mapFirstClickHandler,this)}},{key:"disActive",value:function(){this.removeEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.styleName=null,this.feature=null,this.plotType=null,this.plotParams=null,this.activateMapTools()}},{key:"isDrawing",value:function(){return!!this.plotType}},{key:"mapFirstClickHandler",value:function(t){this.map.un("click",this.mapFirstClickHandler,this),this.points.push(t.coordinate),this.plot=this.createPlot(this.plotType,this.points,this.plotParams),this.plot.setMap(this.map),this.feature=new ol.Feature(this.plot),this.feature.set("isPlot",!0),this.drawLayer.getSource().addFeature(this.feature),this.plotType===p.POINT||this.plotType===p.PENNANT?(this.plot.finishDrawing(),this.drawEnd(t)):(this.map.on("click",this.mapNextClickHandler,this),this.plot.freehand||this.map.on("dblclick",this.mapDoubleClickHandler,this),v.listen(this.mapViewport,h.default.MOUSEMOVE,this.mapMouseMoveHandler,this,!1)),this.plotType&&this.feature&&(this.plotParams.plotType=this.plotType,this.feature.setProperties(this.plotParams)),this.styleName&&("qwlx"===this.styleName&&this.feature.setStyle(x.qwStyle),"rxlx"===this.styleName&&this.feature.setStyle(x.rxStyle),"jylx"===this.styleName&&this.feature.setStyle(x.jyStyle),"sdlx"===this.styleName&&this.feature.setStyle(x.sdStyle),"fllx"===this.styleName&&this.feature.setStyle(x.flStyle),"hxq"===this.styleName&&this.feature.setStyle(x.hxqStyle),"wwq"===this.styleName&&this.feature.setStyle(x.wwqStyle),"sdq"===this.styleName&&this.feature.setStyle(x.sdqStyle),"jcq"===this.styleName&&this.feature.setStyle(x.jcqStyle),"jldd1"===this.styleName&&this.feature.setStyle(x.jldd1Style),"jldd2"===this.styleName&&this.feature.setStyle(x.jldd2Style))}},{key:"mapNextClickHandler",value:function(t){if(!this.plot.freehand&&(0,c.MathDistance)(t.coordinate,this.points[this.points.length-1])<1e-4)return!1;this.points.push(t.coordinate),this.plot.setPoints(this.points),this.plot.fixPointCount===this.plot.getPointCount()&&this.mapDoubleClickHandler(t),this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(t)}},{key:"mapDoubleClickHandler",value:function(t){t.preventDefault(),this.plot.finishDrawing(),this.drawEnd(t)}},{key:"mapMouseMoveHandler",value:function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if((0,c.MathDistance)(e,this.points[this.points.length-1])<1e-4)return!1;if(this.plot.freehand)this.points.push(e),this.plot.setPoints(this.points);else{var n=this.points.concat([e]);this.plot.setPoints(n)}}},{key:"removeEventHandlers",value:function(){this.map.un("click",this.mapFirstClickHandler,this),this.map.un("click",this.mapNextClickHandler,this),v.unListen(this.mapViewport,h.default.MOUSEMOVE,this.mapMouseMoveHandler,this),this.map.un("dblclick",this.mapDoubleClickHandler,this)}},{key:"drawEnd",value:function(t){this.dispatch("drawEnd",{type:"drawEnd",originalEvent:t,feature:this.feature.clone()}),this.feature&&this.options.isClear&&this.drawLayer.getSource().removeFeature(this.feature),this.activateMapTools(),this.removeEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.plotParams=null,this.feature=null}},{key:"addFeature",value:function(){this.feature=new ol.Feature(this.plot),this.feature&&this.drawLayer&&this.drawLayer.getSource().addFeature(this.feature)}},{key:"deactiveMapTools",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof ol.interaction.DoubleClickZoom&&(t.dblClickZoomInteraction=e,t.map.removeInteraction(e),1))})}},{key:"activateMapTools",value:function(){this.dblClickZoomInteraction&&this.dblClickZoomInteraction instanceof ol.interaction.DoubleClickZoom&&(this.map.addInteraction(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)}}]),e}((0,l.default)(w.default,y.default,k.default));e.default=E,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(40),c=r(l),f=n(44),h=r(f),p=n(144),d=o(p),y=n(42),g=o(y),v=n(4),m=function(t){function e(t){i(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");return n.map=t,n.mapViewport=n.map.getViewport(),n.activePlot=null,n.startPoint=null,n.ghostControlPoints=null,n.controlPoints=null,n.mouseOver=!1,n.elementTable={},n.activeControlPointId=null,n.mapDragPan=null,n.previousCursor_=null,h.default.call(n),n}return s(e,t),u(e,[{key:"initHelperDom",value:function(){var t=this;if(!this.map||!this.activePlot)return!1;var e=this.getMapParentElement();if(!e)return!1;var n=d.createHidden("div",e,v.BASE_HELP_HIDDEN),o=this.getControlPoints();o&&Array.isArray(o)&&o.length>0&&o.forEach(function(e,o){var r=v.BASE_HELP_CONTROL_POINT_ID+"-"+o;d.create("div",v.BASE_HELP_CONTROL_POINT_ID,n,r),t.elementTable[r]=o})}},{key:"getMapParentElement",value:function(){var t=this.map.getTargetElement();return!!t&&t.parentNode}},{key:"destroyHelperDom",value:function(){var t=this;this.controlPoints&&Array.isArray(this.controlPoints)&&this.controlPoints.length>0&&(this.controlPoints.forEach(function(e,n){e&&e instanceof ol.Overlay&&t.map.removeOverlay(e);var o=d.get(v.BASE_HELP_CONTROL_POINT_ID+"-"+n);o&&(g.removeListener(o,"mousedown",t.controlPointMouseDownHandler,t),g.removeListener(o,"mousemove",t.controlPointMouseMoveHandler2,t))}),this.controlPoints=[]);var e=this.getMapParentElement(),n=d.get(v.BASE_HELP_HIDDEN);n&&e&&d.remove(n,e)}},{key:"initControlPoints",value:function(){var t=this;this.controlPoints=[];var e=this.getControlPoints();e&&Array.isArray(e)&&e.length>0&&e.forEach(function(n,o){var r=v.BASE_HELP_CONTROL_POINT_ID+"-"+o;t.elementTable[r]=o;var i=d.get(r),a=new ol.Overlay({id:r,position:e[o],positioning:"center-center",element:i});t.controlPoints.push(a),t.map.addOverlay(a),t.map.render(),g.addListener(i,"mousedown",t.controlPointMouseDownHandler,t),g.addListener(i,"mousemove",t.controlPointMouseMoveHandler2,t)})}},{key:"controlPointMouseMoveHandler2",value:function(t){t.stopImmediatePropagation()}},{key:"controlPointMouseDownHandler",value:function(t){var e=t.target.id;this.activeControlPointId=e,this.map.on("pointermove",this.controlPointMouseMoveHandler,this),g.listen(this.mapViewport,c.default.MOUSEUP,this.controlPointMouseUpHandler,this,!1)}},{key:"controlPointMouseMoveHandler",value:function(t){var e=t.coordinate;if(this.activeControlPointId){var n=this.activePlot.getGeometry(),o=this.elementTable[this.activeControlPointId];n.updatePoint(e,o);var r=this.map.getOverlayById(this.activeControlPointId);r&&r.setPosition(e)}}},{key:"controlPointMouseUpHandler",value:function(t){this.map.un("pointermove",this.controlPointMouseMoveHandler,this),g.unListen(this.mapViewport,c.default.MOUSEUP,this.controlPointMouseUpHandler,this),this.activePlot&&this.dispatch("editEnd",{type:"editEnd",originalEvent:t,feature:this.activePlot.clone()})}},{key:"activate",value:function(t){var e=this;if(t&&t instanceof ol.Feature&&t.get("isPlot")&&t!==this.activePlot)if(this.deactivate(),this.activePlot=t,this.previousCursor_=this.map.getTargetElement().style.cursor,t.get("_text_area_source_")){var n=t.get("_text_area_source_");n.featureOnFocus(),this.map.on("pointermove",this.baseTextAreaPointMove_,this)}else window.setTimeout(function(){e.dispatch("active_plot_change",e.activePlot)},500),this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints()}},{key:"baseTextAreaPointMove_",value:function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&e===this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getTargetElement().style.cursor="move",this.map.on("pointerdown",this.baseTextAreaPointerDown_,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getTargetElement().style.cursor="default",this.map.un("pointerdown",this.baseTextAreaPointerDown_,this)),e}},{key:"baseTextAreaPointerDown_",value:function(t){this.startPoint=this.activePlot.getGeometry().getCoordinates(),this.disableMapDragPan(),this.map.on("pointerup",this.baseTextAreaPointerUp_,this),this.map.on("pointerdrag",this.baseTextAreaPointerDrag_,this)}},{key:"baseTextAreaPointerUp_",value:function(t){this.enableMapDragPan(),this.map.un("pointerup",this.baseTextAreaPointerUp_,this),this.map.un("pointerdrag",this.baseTextAreaPointerDrag_,this)}},{key:"baseTextAreaPointerDrag_",value:function(t){var e=t.coordinate[0]-this.startPoint[0],n=t.coordinate[1]-this.startPoint[1];this.activePlot.getGeometry().translate(e,n)}},{key:"getControlPoints",value:function(){var t=[];if(this.activePlot){var e=this.activePlot.getGeometry();e&&(t=e.getPoints())}return t}},{key:"plotMouseOverOutHandler",value:function(t){try{var e=this.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&e===this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getTargetElement().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getTargetElement().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this)),e}catch(t){console.log(t)}}},{key:"plotMouseDownHandler",value:function(t){this.ghostControlPoints=this.getControlPoints(),this.startPoint=t.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"plotMouseMoveHandler",value:function(t){try{var e=t.coordinate,n=e[0]-this.startPoint[0],o=e[1]-this.startPoint[1],r=[];if(this.ghostControlPoints&&Array.isArray(this.ghostControlPoints)&&this.ghostControlPoints.length>0)for(var i=0;i<this.ghostControlPoints.length;i++){var a=[this.ghostControlPoints[i][0]+n,this.ghostControlPoints[i][1]+o];r.push(a);var s=v.BASE_HELP_CONTROL_POINT_ID+"-"+i,u=this.map.getOverlayById(s);u&&(u.setPosition(a),u.setPositioning("center-center"))}this.activePlot.getGeometry().setPoints(r)}catch(t){console.log(t)}}},{key:"plotMouseUpHandler",value:function(t){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this),this.activePlot&&this.dispatch("editEnd",{type:"editEnd",originalEvent:t,feature:this.activePlot.clone()})}},{key:"disconnectEventHandlers",value:function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),g.unListen(this.mapViewport,c.default.MOUSEMOVE,this.controlPointMouseMoveHandler,this),g.unListen(this.mapViewport,c.default.MOUSEUP,this.controlPointMouseUpHandler,this),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)}},{key:"deactivate",value:function(){this.activePlot=null,this.mouseOver=!1,this.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=null,this.destroyHelperDom(),this.disconnectEventHandlers(),this.enableMapDragPan(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null}},{key:"disableMapDragPan",value:function(){var t=this;this.map.getInteractions().getArray().every(function(e){return!(e instanceof ol.interaction.DragPan&&(t.mapDragPan=e,t.map.removeInteraction(e),1))})}},{key:"enableMapDragPan",value:function(){this.mapDragPan&&this.mapDragPan instanceof ol.interaction.DragPan&&(this.map.addInteraction(this.mapDragPan),this.mapDragPan=null)}}]),e}(h.default);e.default=m,t.exports=e.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(61),c=o(l),f=n(139),h=o(f),p=n(41),d=o(p),y=n(4),g=function(t){function e(t,n){r(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");return o.map=t,o.layerName=n||y.BASE_LAYERNAME,o}return a(e,t),u(e,[{key:"getBaseStyle",value:function(t){var e=t.getStyle();if(!e){var n=this.getLayerByLayerName(this.layerName);if(!(n&&n instanceof ol.layer.Vector))return!1;e=n.getStyle()}return e}},{key:"setIcon",value:function(t,e){try{if(t&&t instanceof ol.Feature){var n=this.getBaseStyle(t),o=n.clone(),r=this._getImage(r);r&&(o.setImage(r),t.setStyle(o))}}catch(t){console.warn(t)}}},{key:"setBackgroundColor",value:function(t,e){try{if(t&&t instanceof ol.Feature){var n=this.getBaseStyle(t),o=n.clone(),r=o.getFill(),i=r.getColor();if(i){var a=ol.color.asArray(i),s=ol.color.asArray(e),u=this.handleBackgroundColor(s,a[3]);r.setColor(u),t.setStyle(o)}}}catch(t){console.warn(t)}}},{key:"setOpacity",value:function(t,e){try{if(t&&t instanceof ol.Feature){var n=this.getBaseStyle(t);if(n){var o=n.clone(),r=o.getFill(),i=r.getColor();if(i){var a=ol.color.asArray(i);a[3]=e/10;var s="rgba("+a.join(",")+")";r.setColor(s),t.setStyle(o)}}}}catch(t){console.warn(t)}}},{key:"setBorderColor",value:function(t,e){try{if(t&&t instanceof ol.Feature){var n=this.getBaseStyle(t),o=n.clone();o.getStroke().setColor(e),t.setStyle(o)}}catch(t){console.warn(t)}}},{key:"setBorderWidth",value:function(t,e){try{if(t&&t instanceof ol.Feature){var n=this.getBaseStyle(t),o=n.clone();o.getStroke().setWidth(e),t.setStyle(o)}}catch(t){console.warn(t)}}},{key:"handleBackgroundColor",value:function(t,e){try{e||(e=1);var n=ol.color.asArray(t);return n[3]=e,"rgba("+n.join(",")+")"}catch(t){console.warn(t)}}},{key:"getColor",value:function(t){try{var e=ol.color.asArray(t);return ol.color.asString(e)}catch(t){console.warn(t)}}},{key:"fixObject",value:function(t){if(t&&"object"===(void 0===t?"undefined":s(t)))for(var e in t)e&&void 0===t[e]&&delete t[e];return t}},{key:"getStroke_",value:function(t){var e=null;if(t){var n=t.getStroke();n&&(e={},e.strokeColor=this.getColor(n.getColor()),e.strokeWidth=n.getWidth(),e.strokeLineDash=n.getLineDash(),e.lineDashOffset=n.getLineDashOffset(),e.strokeLineCap=n.getLineCap(),e.strokeLineJoin=n.getLineJoin(),e.strokeMiterLimit=n.getMiterLimit())}return this.fixObject(e)}},{key:"getFill_",value:function(t){var e=null;if(t){var n=t.getFill();if(n){e={};var o=n.getColor();e.fillColor=this.getColor(o)}}return this.fixObject(e)}},{key:"getText_",value:function(t){var e=null;if(t){var n=t.getText();n&&(e={},e.textFont=n.getFont(),e.textOffsetX=n.getOffsetX(),e.textOffsetY=n.getOffsetY(),e.textScale=n.getScale(),e.textRotation=n.getRotation(),e.text=n.getText(),e.textAlign=n.getTextAlign(),e.textBaseline=n.getTextBaseline(),e.rotateWithView=n.getRotateWithView(),e.textFill=this.getFill_(n),e.textStroke=this.getStroke_(n))}return this.fixObject(e)}},{key:"getImage_",value:function(t){var e=null;if(t){var n=t.getImage();n&&(e={},n instanceof ol.style.Icon?(e.type="icon",e.image={},e.imageAnchor=n.getAnchor(),e.imageColor=n.getColor(),e.imageSrc=n.getSrc(),e.imgSize=n.getSize(),e.scale=n.getScale(),e.imageRotation=n.getRotation(),e.rotateWithView=n.getRotateWithView(),e.imageOpacity=n.getOpacity(),e.snapToPixel=n.getSnapToPixel(),e.offset=n.getOrigin()):n instanceof ol.style.RegularShape&&(e.type="",e.image={},e.fill=this.getFill_(n),e.points=n.getPoints(),e.radius=n.getRadius(),e.radius2=n.getRadius2(),e.angle=n.getAngle(),e.stroke=this.getStroke_(n),e.rotateWithView=n.getRotateWithView(),e.snapToPixel=n.getSnapToPixel()))}return this.fixObject(e)}},{key:"getStyleCode",value:function(t){try{if(t&&t instanceof ol.Feature){var e=this.getBaseStyle(t);if(e&&e instanceof ol.style.Style){var n=this.getFill_(e),o=1,r=null;n.fillColor&&(r=ol.color.asArray(n.fillColor),o=parseFloat(r[3]));var i=this.handleBackgroundColor(ol.color.asString(r),o),a=this.getStroke_(e),s=this.getText_(e);return{fill:{fillColor:i,opacity:o},stroke:a,image:this.getImage_(e),text:s}}}}catch(t){console.warn(t)}}},{key:"getFeatures",value:function(){var t=this,e=[],n=this.getLayerByLayerName(this.layerName);if(n){var o=n.getSource();if(o&&o instanceof ol.source.Vector){var r=o.getFeatures();r&&r.length>0&&r.forEach(function(n,o){if(n&&n.getGeometry){var r=n.getGeometry();if(r&&r.getCoordinates){var i=r.getType(),a=r.getCoordinates();e.push({type:"Feature",geometry:{type:i,coordinates:a},properties:{style:t.getStyleCode(n)}})}}})}}return e}}]),e}((0,d.default)(c.default,h.default));e.default=g,t.exports=e.default},function(t,e){},function(t,e,n){"use strict";var o=n(7)("unscopables"),r=Array.prototype;void 0==r[o]&&n(13)(r,o,{}),t.exports=function(t){r[o][t]=!0}},function(t,e,n){"use strict";var o=n(16),r=n(56),i=n(88);t.exports=function(t){return function(e,n,a){var s,u=o(e),l=r(u.length),c=i(a,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){"use strict";var o=n(20),r=n(6),i=n(77),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var o=[],r=0;r<e;r++)o[r]="a["+r+"]";s[e]=Function("F,a","return new F("+o.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=o(this),n=a.call(arguments,1),s=function o(){var r=n.concat(a.call(arguments));return this instanceof o?u(e,r.length,r):i(e,r,t)};return r(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,n){"use strict";var o=n(8).f,r=n(23),i=n(54),a=n(21),s=n(46),u=n(49),l=n(32),c=n(52),f=n(86),h=n(11),p=n(33).fastKey,d=n(57),y=h?"_s":"size",g=function(t,e){var n,o=p(e);if("F"!==o)return t._i[o];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t(function(t,o){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=o&&u(o,n,t[l],t)});return i(c.prototype,{clear:function(){for(var t=d(this,e),n=t._i,o=t._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete n[o.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=d(this,e),o=g(n,t);if(o){var r=o.n,i=o.p;delete n._i[o.i],o.r=!0,i&&(i.n=r),r&&(r.p=i),n._f==o&&(n._f=r),n._l==o&&(n._l=i),n[y]--}return!!o},forEach:function(t){d(this,e);for(var n,o=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(o(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(d(this,e),t)}}),h&&o(c.prototype,"size",{get:function(){return d(this,e)[y]}}),c},def:function(t,e,n){var o,r,i=g(t,e);return i?i.v=n:(t._l=i={i:r=p(e,!0),k:e,v:n,p:o=t._l,n:void 0,r:!1},t._f||(t._f=i),o&&(o.n=i),t[y]++,"F"!==r&&(t._i[r]=i)),t},getEntry:g,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var o=n(5),r=n(3),i=n(14),a=n(54),s=n(33),u=n(49),l=n(46),c=n(6),f=n(12),h=n(82),p=n(26),d=n(76);t.exports=function(t,e,n,y,g,v){var m=o[t],b=m,w=g?"set":"add",P=b&&b.prototype,_={},O=function(t){var e=P[t];i(P,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(v||P.forEach&&!f(function(){(new b).entries().next()}))){var k=new b,x=k[w](v?{}:-0,1)!=k,E=f(function(){k.has(1)}),T=h(function(t){new b(t)}),C=!v&&f(function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)});T||(b=e(function(e,n){l(e,b,t);var o=d(new m,e,b);return void 0!=n&&u(n,g,o[w],o),o}),b.prototype=P,P.constructor=b),(E||C)&&(O("delete"),O("has"),g&&O("get")),(C||x)&&O(w),v&&P.clear&&delete P.clear}else b=y.getConstructor(e,t,g,w),a(b.prototype,n),s.NEED=!0;return p(b,t),_[t]=b,r(r.G+r.W+r.F*(b!=m),_),v||y.setStrong(b,t,g),b}},function(t,e,n){"use strict";var o=n(25),r=n(35),i=n(36);t.exports=function(t){var e=o(t),n=r.f;if(n)for(var a,s=n(t),u=i.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,n){"use strict";var o=n(5).document;t.exports=o&&o.documentElement},function(t,e,n){"use strict";var o=n(6),r=n(55).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&o(i)&&r&&r(t,i),t}},function(t,e,n){"use strict";t.exports=function(t,e,n){var o=void 0===n;switch(e.length){case 0:return o?t():t.call(n);case 1:return o?t(e[0]):t.call(n,e[0]);case 2:return o?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var o=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var o=n(17),r=n(7)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||i[r]===t)}},function(t,e,n){"use strict";var o=n(29);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){"use strict";var o=n(1);t.exports=function(t,e,n,r){try{return r?e(o(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&o(i.call(t)),e}}},function(t,e,n){"use strict";var o=n(7)("iterator"),r=!1;try{var i=[7][o]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i=[7],a=i[o]();a.next=function(){return{done:n=!0}},i[o]=function(){return a},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var o=n(8),r=n(1),i=n(25);t.exports=n(11)?Object.defineProperties:function(t,e){r(t);for(var n,a=i(e),s=a.length,u=0;s>u;)o.f(t,n=a[u++],e[n]);return t}},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(16),i=n(34).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":o(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return i(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?u(t):i(r(t))}},function(t,e,n){"use strict";var o=n(34),r=n(35),i=n(1),a=n(5).Reflect;t.exports=a&&a.ownKeys||function(t){var e=o.f(i(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var o=n(5),r=n(8),i=n(11),a=n(7)("species");t.exports=function(t){var e=o[t];i&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var o=n(39),r=n(30);t.exports=function(t){return function(e,n){var i,a,s=String(r(e)),u=o(n),l=s.length;return u<0||u>=l?t?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(t,e,n){"use strict";var o=n(39),r=Math.max,i=Math.min;t.exports=function(t,e){return t=o(t),t<0?r(t+e,0):i(t,e)}},function(t,e,n){"use strict";var o=n(30);t.exports=function(t){return Object(o(t))}},function(t,e,n){"use strict";var o=n(5),r=n(10),i=n(22),a=n(58),s=n(8).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=i?{}:o.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){"use strict";var o=n(47),r=n(7)("iterator"),i=n(17);t.exports=n(10).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},function(t,e,n){"use strict";var o=n(69),r=n(52),i=n(17),a=n(16);t.exports=n(32)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(t,e,n){"use strict";var o=n(3),r=n(20),i=n(1),a=(n(5).Reflect||{}).apply,s=Function.apply;o(o.S+o.F*!n(12)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var o=r(t),u=i(n);return a?a(o,e,u):s.call(o,e,u)}})},function(t,e,n){"use strict";var o=n(3),r=n(23),i=n(20),a=n(1),s=n(6),u=n(12),l=n(71),c=(n(5).Reflect||{}).construct,f=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),h=!u(function(){c(function(){})});o(o.S+o.F*(f||h),"Reflect",{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(h&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return o.push.apply(o,e),new(l.apply(t,o))}var u=n.prototype,p=r(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,n){"use strict";var o=n(8),r=n(3),i=n(1),a=n(27);r(r.S+r.F*n(12)(function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){i(t),e=a(e,!0),i(n);try{return o.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var o=n(3),r=n(15).f,i=n(1);o(o.S,"Reflect",{deleteProperty:function(t,e){var n=r(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var o=n(3),r=n(1),i=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(51)(i,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),o(o.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,n){"use strict";var o=n(15),r=n(3),i=n(1);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return o.f(i(t),e)}})},function(t,e,n){"use strict";var o=n(3),r=n(24),i=n(1);o(o.S,"Reflect",{getPrototypeOf:function(t){return r(i(t))}})},function(t,e,n){"use strict";function o(t,e){var n,s,c=arguments.length<3?t:arguments[2];return l(t)===c?t[e]:(n=r.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(s=i(t))?o(s,e,c):void 0}var r=n(15),i=n(24),a=n(9),s=n(3),u=n(6),l=n(1);s(s.S,"Reflect",{get:o})},function(t,e,n){"use strict";var o=n(3);o(o.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){"use strict";var o=n(3),r=n(1),i=Object.isExtensible;o(o.S,"Reflect",{isExtensible:function(t){return r(t),!i||i(t)}})},function(t,e,n){"use strict";var o=n(3);o(o.S,"Reflect",{ownKeys:n(85)})},function(t,e,n){"use strict";var o=n(3),r=n(1),i=Object.preventExtensions;o(o.S,"Reflect",{preventExtensions:function(t){r(t);try{return i&&i(t),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var o=n(3),r=n(55);r&&o(o.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";function o(t,e,n){var u,h,p=arguments.length<4?t:arguments[3],d=i.f(c(t),e);if(!d){if(f(h=a(t)))return o(h,e,n,p);d=l(0)}if(s(d,"value")){if(!1===d.writable||!f(p))return!1;if(u=i.f(p,e)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,r.f(p,e,u)}else r.f(p,e,l(0,n));return!0}return void 0!==d.set&&(d.set.call(p,n),!0)}var r=n(8),i=n(15),a=n(24),s=n(9),u=n(3),l=n(18),c=n(1),f=n(6);u(u.S,"Reflect",{set:o})},function(t,e,n){"use strict";var o=n(72),r=n(57);t.exports=n(73)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return o.def(r(this,"Set"),t=0===t?0:t,t)}},o)},function(t,e,n){"use strict";var o=n(87)(!0);n(32)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(5),i=n(9),a=n(11),s=n(3),u=n(14),l=n(33).KEY,c=n(12),f=n(38),h=n(26),p=n(19),d=n(7),y=n(58),g=n(90),v=n(74),m=n(80),b=n(1),w=n(6),P=n(16),_=n(27),O=n(18),k=n(23),x=n(84),E=n(15),T=n(8),C=n(25),S=E.f,M=T.f,A=x.f,L=r.Symbol,I=r.JSON,j=I&&I.stringify,F=d("_hidden"),R=d("toPrimitive"),D={}.propertyIsEnumerable,N=f("symbol-registry"),B=f("symbols"),H=f("op-symbols"),W=Object.prototype,U="function"==typeof L,V=r.QObject,z=!V||!V.prototype||!V.prototype.findChild,G=a&&c(function(){return 7!=k(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var o=S(W,e);o&&delete W[e],M(t,e,n),o&&t!==W&&M(W,e,o)}:M,Y=function(t){var e=B[t]=k(L.prototype);return e._k=t,e},X=U&&"symbol"==o(L.iterator)?function(t){return"symbol"==(void 0===t?"undefined":o(t))}:function(t){return t instanceof L},q=function(t,e,n){return t===W&&q(H,e,n),b(t),e=_(e,!0),b(n),i(B,e)?(n.enumerable?(i(t,F)&&t[F][e]&&(t[F][e]=!1),n=k(n,{enumerable:O(0,!1)})):(i(t,F)||M(t,F,O(1,{})),t[F][e]=!0),G(t,e,n)):M(t,e,n)},Q=function(t,e){b(t);for(var n,o=v(e=P(e)),r=0,i=o.length;i>r;)q(t,n=o[r++],e[n]);return t},K=function(t,e){return void 0===e?k(t):Q(k(t),e)},Z=function(t){var e=D.call(this,t=_(t,!0));return!(this===W&&i(B,t)&&!i(H,t))&&(!(e||!i(this,t)||!i(B,t)||i(this,F)&&this[F][t])||e)},J=function(t,e){if(t=P(t),e=_(e,!0),t!==W||!i(B,e)||i(H,e)){var n=S(t,e);return!n||!i(B,e)||i(t,F)&&t[F][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=A(P(t)),o=[],r=0;n.length>r;)i(B,e=n[r++])||e==F||e==l||o.push(e);return o},tt=function(t){for(var e,n=t===W,o=A(n?H:P(t)),r=[],a=0;o.length>a;)!i(B,e=o[a++])||n&&!i(W,e)||r.push(B[e]);return r};U||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function e(n){this===W&&e.call(H,n),i(this,F)&&i(this[F],t)&&(this[F][t]=!1),G(this,t,O(1,n))};return a&&z&&G(W,t,{configurable:!0,set:e}),Y(t)},u(L.prototype,"toString",function(){return this._k}),E.f=J,T.f=q,n(34).f=x.f=$,n(36).f=Z,n(35).f=tt,a&&!n(22)&&u(W,"propertyIsEnumerable",Z,!0),y.f=function(t){return Y(d(t))}),s(s.G+s.W+s.F*!U,{Symbol:L});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var ot=C(d.store),rt=0;ot.length>rt;)g(ot[rt++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return i(N,t+="")?N[t]:N[t]=L(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!U,"Object",{create:K,defineProperty:q,defineProperties:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),I&&s(s.S+s.F*(!U||c(function(){var t=L();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){for(var e,n,o=[t],r=1;arguments.length>r;)o.push(arguments[r++]);if(n=e=o[1],(w(e)||void 0!==t)&&!X(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),o[1]=e,j.apply(I,o)}}),L.prototype[R]||n(13)(L.prototype,R,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){"use strict";for(var o=n(92),r=n(25),i=n(14),a=n(5),s=n(13),u=n(17),l=n(7),c=l("iterator"),f=l("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(p),y=0;y<d.length;y++){var g,v=d[y],m=p[v],b=a[v],w=b&&b.prototype;if(w&&(w[c]||s(w,c,h),w[f]||s(w,f,v),u[v]=h,m))for(g in o)w[g]||i(w,g,o[g],!0)}},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.ARC,a.fixPointCount=3,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.setCoordinates(this.points);else{var e=[this.points[0],this.points[1],this.points[2],null,null],n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],s=l.getCircleCenterOfThreePoints(n,o,r),u=l.MathDistance(n,s),c=l.getAzimuth(n,s),f=l.getAzimuth(o,s);l.isClockWise(n,o,r)?(i=f,a=c):(i=c,a=f),this.setCoordinates(l.getArcPoints(s,u,i,a))}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.LineString);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(60),s=function(t){return t&&t.__esModule?t:{default:t}}(a),u=n(0),l=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return a.tailWidthFactor=.05,a.neckWidthFactor=.1,a.headWidthFactor=.15,a.type=u.ASSAULT_DIRECTION,a.headAngle=Math.PI/4,a.neckAngle=.17741*Math.PI,n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a.set("params",i),a}return i(e,t),e}(s.default);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(4),c=o(l),f=n(2),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.DOUBLE_ARROW,a.headHeightFactor=.25,a.headWidthFactor=.3,a.neckHeightFactor=.85,a.neckWidthFactor=.15,a.connPoint=null,a.tempPoint4=null,a.fixPointCount=4,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;if(t>2){var e=[this.points[0],this.points[1],this.points[2]],n=e[0],o=e[1],r=e[2];3===t?(this.tempPoint4=this.getTempPoint4(n,o,r),this.connPoint=h.Mid(n,o)):4===t?(this.tempPoint4=this.points[3],this.connPoint=h.Mid(n,o)):(this.tempPoint4=this.points[3],this.connPoint=this.points[4]);var i=void 0,a=void 0;h.isClockWise(n,o,r)?(i=this.getArrowPoints(n,this.connPoint,this.tempPoint4,!1),a=this.getArrowPoints(this.connPoint,o,r,!0)):(i=this.getArrowPoints(o,this.connPoint,r,!1),a=this.getArrowPoints(this.connPoint,n,this.tempPoint4,!0));var s=i.length,u=(s-5)/2,l=i.slice(0,u),c=i.slice(u,u+5),f=i.slice(u+5,s),p=a.slice(0,u),d=a.slice(u,u+5),y=a.slice(u+5,s);p=h.getBezierPoints(p);var g=h.getBezierPoints(y.concat(l.slice(1)));f=h.getBezierPoints(f);var v=p.concat(d,g,c,f);this.setCoordinates([v])}}catch(t){console.log(t)}}},{key:"getArrowPoints",value:function(t,e,n,o){var r=h.Mid(t,e),i=h.MathDistance(r,n),a=h.getThirdPoint(n,r,0,.3*i,!0),s=h.getThirdPoint(n,r,0,.5*i,!0);a=h.getThirdPoint(r,a,c.HALF_PI,i/5,o),s=h.getThirdPoint(r,s,c.HALF_PI,i/4,o);var u=[r,a,s,n],l=this.getArrowHeadPoints(u);if(!(l&&Array.isArray(l)&&l.length>0))throw new Error("插值出错");var f=[l[0],l[4]],p=f[0],d=f[1],y=h.MathDistance(t,e)/h.getBaseLength(u)/2,g=this.getArrowBodyPoints(u,p,d,y);if(g){var v=g.length,m=g.slice(0,v/2),b=g.slice(v/2,v);return m.push(p),b.push(d),m=m.reverse(),m.push(e),b=b.reverse(),b.push(t),m.reverse().concat(l,b)}}},{key:"getArrowHeadPoints",value:function(t){try{var e=h.getBaseLength(t),n=e*this.headHeightFactor,o=t[t.length-1],r=n*this.headWidthFactor,i=n*this.neckWidthFactor,a=n*this.neckHeightFactor,s=h.getThirdPoint(t[t.length-2],o,0,n,!0),u=h.getThirdPoint(t[t.length-2],o,0,a,!0),l=h.getThirdPoint(o,s,c.HALF_PI,r,!1),f=h.getThirdPoint(o,s,c.HALF_PI,r,!0);return[h.getThirdPoint(o,u,c.HALF_PI,i,!1),l,o,f,h.getThirdPoint(o,u,c.HALF_PI,i,!0)]}catch(t){console.log(t)}}},{key:"getArrowBodyPoints",value:function(t,e,n,o){for(var r=h.wholeDistance(t),i=h.getBaseLength(t),a=i*o,s=h.MathDistance(e,n),u=(a-s)/2,l=0,c=[],f=[],p=1;p<t.length-1;p++){var d=h.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2;l+=h.MathDistance(t[p-1],t[p]);var y=(a/2-l/r*u)/Math.sin(d),g=h.getThirdPoint(t[p-1],t[p],Math.PI-d,y,!0),v=h.getThirdPoint(t[p-1],t[p],d,y,!1);c.push(g),f.push(v)}return c.concat(f)}},{key:"getTempPoint4",value:function(t,e,n){try{var o=h.Mid(t,e),r=h.MathDistance(o,n),i=h.getAngleOfThreePoints(t,o,n),a=void 0,s=void 0,u=void 0,l=void 0;return i<c.HALF_PI?(s=r*Math.sin(i),u=r*Math.cos(i),l=h.getThirdPoint(t,o,c.HALF_PI,s,!1),a=h.getThirdPoint(o,l,c.HALF_PI,u,!0)):i>=c.HALF_PI&&i<Math.PI?(s=r*Math.sin(Math.PI-i),u=r*Math.cos(Math.PI-i),l=h.getThirdPoint(t,o,c.HALF_PI,s,!1),a=h.getThirdPoint(o,l,c.HALF_PI,u,!1)):i>=Math.PI&&i<1.5*Math.PI?(s=r*Math.sin(i-Math.PI),u=r*Math.cos(i-Math.PI),l=h.getThirdPoint(t,o,c.HALF_PI,s,!0),a=h.getThirdPoint(o,l,c.HALF_PI,u,!0)):(s=r*Math.sin(2*Math.PI-i),u=r*Math.cos(2*Math.PI-i),l=h.getThirdPoint(t,o,c.HALF_PI,s,!0),a=h.getThirdPoint(o,l,c.HALF_PI,u,!1)),a}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){3===this.getPointCount()&&null!==this.tempPoint4&&this.points.push(this.tempPoint4),null!==this.connPoint&&this.points.push(this.connPoint)}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(28),c=function(t){return t&&t.__esModule?t:{default:t}}(l),f=n(2),h=o(f),p=n(4),d=o(p),y=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));return a.type=u.SQUAD_COMBAT,a.headHeightFactor=.18,a.headWidthFactor=.3,a.neckHeightFactor=.85,a.neckWidthFactor=.15,a.tailWidthFactor=.1,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),n=this.getArrowHeadPoints(t,e[0],e[1]),o=n[0],r=n[4],i=this.getArrowBodyPoints(t,o,r,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(o);var u=[e[1]].concat(i.slice(a/2,a));u.push(r),s=h.getQBSplinePoints(s),u=h.getQBSplinePoints(u),this.setCoordinates([s.concat(n,u.reverse())])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=h.getBaseLength(t),n=e*this.tailWidthFactor;return[h.getThirdPoint(t[1],t[0],d.HALF_PI,n,!1),h.getThirdPoint(t[1],t[0],d.HALF_PI,n,!0)]}}]),e}(c.default);e.default=y,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.STRAIGHT_ARROW,a.fixPointCount=2,a.maxArrowLength=3e6,a.arrowLengthScale=5,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=[t[0],t[1]],n=e[0],o=e[1],r=l.MathDistance(n,o),i=r/this.arrowLengthScale;i=i>this.maxArrowLength?this.maxArrowLength:i;var a=l.getThirdPoint(n,o,Math.PI/6,i,!1),s=l.getThirdPoint(n,o,Math.PI/6,i,!0);this.setCoordinates([n,o,a,o,s])}catch(t){console.log(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.LineString);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(28),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=n(2),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(c),h=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return a.type=s.TAILED_ATTACK_ARROW,a.headHeightFactor=.18,a.headWidthFactor=.3,a.neckHeightFactor=.85,a.neckWidthFactor=.15,a.tailWidthFactor=.1,a.headTailFactor=.8,a.swallowTailFactor=1,a.swallowTailPnt=null,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"generate",value:function(){try{var t=this.getPointCount();if(t<2)return!1;if(2===t)return this.setCoordinates([this.points]),!1;var e=this.getPoints(),n=[e[0],e[1]],o=n[0],r=n[1];f.isClockWise(e[0],e[1],e[2])&&(o=e[1],r=e[0]);var i=f.Mid(o,r),a=[i].concat(e.slice(2)),s=this.getArrowHeadPoints(a,o,r),u=[s[0],s[4]],l=u[0],c=u[1],h=f.MathDistance(o,r),p=f.getBaseLength(a),d=p*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=f.getThirdPoint(a[1],a[0],0,d,!0);var y=h/p,g=this.getArrowBodyPoints(a,l,c,y),v=g.length,m=[o].concat(g.slice(0,v/2));m.push(l);var b=[r].concat(g.slice(v/2,v));b.push(c),m=f.getQBSplinePoints(m),b=f.getQBSplinePoints(b),this.setCoordinates([m.concat(s,b.reverse(),[this.swallowTailPnt,m[0]])])}catch(t){console.log(t)}}}]),e}(l.default);e.default=h,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(28),c=function(t){return t&&t.__esModule?t:{default:t}}(l),f=n(2),h=o(f),p=n(4),d=o(p),y=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));return a.type=u.TAILED_SQUAD_COMBAT,a.headHeightFactor=.18,a.headWidthFactor=.3,a.neckHeightFactor=.85,a.neckWidthFactor=.15,a.tailWidthFactor=.1,a.swallowTailFactor=1,a.swallowTailPnt=null,a.fixPointCount=2,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"generate",value:function(){try{if(this.getPointCount()<2)return!1;var t=this.getPoints(),e=this.getTailPoints(t),n=this.getArrowHeadPoints(t,e[0],e[2]),o=n[0],r=n[4],i=this.getArrowBodyPoints(t,o,r,this.tailWidthFactor),a=i.length,s=[e[0]].concat(i.slice(0,a/2));s.push(o);var u=[e[2]].concat(i.slice(a/2,a));u.push(r),s=h.getQBSplinePoints(s),u=h.getQBSplinePoints(u),this.setCoordinates([s.concat(n,u.reverse(),[e[1],s[0]])])}catch(t){console.log(t)}}},{key:"getTailPoints",value:function(t){var e=h.getBaseLength(t),n=e*this.tailWidthFactor,o=h.getThirdPoint(t[1],t[0],d.HALF_PI,n,!1),r=h.getThirdPoint(t[1],t[0],d.HALF_PI,n,!0),i=n*this.swallowTailFactor;return[o,h.getThirdPoint(t[1],t[0],0,i,!0),r]}}]),e}(c.default);e.default=y,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.CIRCLE,a.fixPointCount=2,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(!(this.getPointCount()<2)){var t=this.points[0],e=l.MathDistance(t,this.points[1]);this.setCoordinates([this.generatePoints(t,e)])}}},{key:"generatePoints",value:function(t,e){for(var n=null,o=null,r=null,i=[],a=0;a<=100;a++)r=2*Math.PI*a/100,n=t[0]+e*Math.cos(r),o=t[1]+e*Math.sin(r),i.push([n,o]);return i}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(4),c=o(l),f=n(2),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.ELLIPSE,a.fixPointCount=2,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=[this.points[0],this.points[1]],e=t[0],n=t[1],o=h.Mid(e,n),r=Math.abs((e[0]-n[0])/2),i=Math.abs((e[1]-n[1])/2),a=this.generatePoints(o,r,i);this.setCoordinates([a])}},{key:"generatePoints",value:function(t,e,n){for(var o=null,r=null,i=null,a=[],s=0;s<=c.FITTING_COUNT;s++)i=2*Math.PI*s/c.FITTING_COUNT,o=t[0]+e*Math.cos(i),r=t[1]+n*Math.sin(i),a.push([o,r]);return a}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.CURVEFLAG,a.fixPointCount=2,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],o=t[t.length-1],r=n,i=[(o[0]-n[0])/4+n[0],(o[1]-n[1])/8+n[1]],a=[(n[0]+o[0])/2,n[1]],s=[3*(o[0]-n[0])/4+n[0],-(o[1]-n[1])/8+n[1]],l=[o[0],n[1]],c=[o[0],(n[1]+o[1])/2],f=[3*(o[0]-n[0])/4+n[0],3*(o[1]-n[1])/8+n[1]],h=[(n[0]+o[0])/2,(n[1]+o[1])/2],p=[(o[0]-n[0])/4+n[0],5*(o[1]-n[1])/8+n[1]],d=[n[0],(n[1]+o[1])/2],y=[n[0],o[1]],g=(0,u.getBezierPoints)([r,i,a,s,l]),v=(0,u.getBezierPoints)([c,f,h,p,d]);e=g.concat(v),e.push(y)}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=l,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.RECTFLAG,a.fixPointCount=2,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],o=t[t.length-1];e=[n,[o[0],n[1]],[o[0],(n[1]+o[1])/2],[n[0],(n[1]+o[1])/2],[n[0],o[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.TRIANGLEFLAG,a.fixPointCount=2,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.calculatePonits(this.points)])}},{key:"calculatePonits",value:function(t){var e=[];if(t.length>1){var n=t[0],o=t[t.length-1];e=[n,[o[0],(n[1]+o[1])/2],[n[0],(n[1]+o[1])/2],[n[0],o[1]]]}return e}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(2),c=o(l),f=n(4),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.CLOSED_CURVE,a.t=.3,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints();e.push(e[0],e[1]);for(var n=[],o=[],r=0;r<e.length-2;r++){var i=c.getBisectorNormals(this.t,e[r],e[r+1],e[r+2]);n=n.concat(i)}var a=n.length;n=[n[a-1]].concat(n.slice(0,a-1));for(var s=0;s<e.length-2;s++){var u=e[s],l=e[s+1];o.push(u);for(var f=0;f<=h.FITTING_COUNT;f++){var p=c.getCubicValue(f/h.FITTING_COUNT,u,n[2*s],n[2*s+1],l);o.push(p)}o.push(l)}this.setCoordinates([o])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.FREE_POLYGON,a.freehand=!0,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(2),c=o(l),f=n(4),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.GATHERING_PLACE,a.t=.4,a.fixPointCount=3,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPoints(),e=this.getPointCount();if(t.length<2)return!1;if(2===e){var n=c.Mid(t[0],t[1]),o=c.MathDistance(t[0],n)/.9,r=c.getThirdPoint(t[0],n,h.HALF_PI,o,!0);t=[t[0],r,t[1]]}var i=c.Mid(t[0],t[2]);t.push(i,t[0],t[1]);for(var a=[],s=void 0,u=void 0,l=void 0,f=[],p=0;p<t.length-2;p++){s=t[p],u=t[p+1],l=t[p+2];var d=c.getBisectorNormals(this.t,s,u,l);a=a.concat(d)}var y=a.length;a=[a[y-1]].concat(a.slice(0,y-1));for(var g=0;g<t.length-2;g++){s=t[g],u=t[g+1],f.push(s);for(var v=0;v<=h.FITTING_COUNT;v++){var m=c.getCubicValue(v/h.FITTING_COUNT,s,a[2*g],a[2*g+1],u);f.push(m)}f.push(u)}this.setCoordinates([f])}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(0),l=n(4),c=o(l),f=n(2),h=o(f),p=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=u.LUNE,a.fixPointCount=3,a.set("params",o),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return a(e,t),s(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;var t=this.getPoints();if(2===this.getPointCount()){var e=h.Mid(t[0],t[1]),n=h.MathDistance(t[0],e),o=h.getThirdPoint(t[0],e,c.HALF_PI,n);t.push(o)}var r=[t[0],t[1],t[2],void 0,void 0],i=r[0],a=r[1],s=r[2],u=r[3],l=r[4],f=h.getCircleCenterOfThreePoints(i,a,s),p=h.MathDistance(i,f),d=h.getAzimuth(i,f),y=h.getAzimuth(a,f);h.isClockWise(i,a,s)?(u=y,l=d):(u=d,l=y),t=h.getArcPoints(f,p,u,l),t.push(t[0]),this.setCoordinates([t])}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.POLYGON,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(this.getPointCount()<2)return!1;this.setCoordinates([this.points])}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.RECTANGLE,a.fixPointCount=2,a.set("params",i),a.isFill=!i||(!1!==i.isFill||i.isFill),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){if(2===this.points.length){var t=[];if(this.isFill){var e=ol.extent.boundingExtent(this.points);t=ol.geom.Polygon.fromExtent(e).getCoordinates()}else{var n=this.points[0],o=this.points[1];t=[n,[n[0],o[1]],o,[o[0],n[1]],n]}this.setCoordinates(t)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.SECTOR,a.fixPointCount=3,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(t<2)return!1;if(2===t)this.setCoordinates([this.points]);else{var e=this.getPoints(),n=[e[0],e[1],e[2]],o=n[0],r=n[1],i=n[2],a=l.MathDistance(r,o),s=l.getAzimuth(r,o),u=l.getAzimuth(i,o),c=l.getArcPoints(o,a,s,u);c.push(o,c[0]),this.setCoordinates([c])}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Polygon);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=n(2),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(u),c=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.CURVE,a.t=.3,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.getPointCount();if(!(t<2))if(2===t)this.setCoordinates(this.points);else{var e=l.getCurvePoints(this.t,this.points);this.setCoordinates(e)}}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.LineString);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.FREEHANDLINE,a.freehand=!0,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.LineString);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.POLYLINE,a.freehand=!1,a.set("params",i),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.LineString);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(45),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(4),c=n(2),f=n(138),h=ol.interaction.DragPan,p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e);var n=[t.id,t.element,t.offset,t.stopEvent,t.positioning,t.insertFirst,t.autoPan,t.autoPanAnimation,t.autoPanMargin,t.className?t.className:"ol-plot-text-editor"],i=n[0],a=n[1],s=n[2],u=n[3],l=n[4],c=n[5],f=n[6],h=n[7],p=n[8],d=n[9],y=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{id:i,element:a,stopEvent:u,insertFirst:c,autoPan:f,autoPanAnimation:h,autoPanMargin:p,className:d}));return y.setOffset(void 0!==s?s:[0,0]),y.setPositioning(void 0!==l?l:"center-center"),y.mapDragPan=void 0,y.isClick_=!1,y.dragging_=!1,y.isFocus_=!1,y.options_=t,y._position=t.position&&t.position.length>0?t.position:[],y.handleTimer_=null,y.currentPixel_=[],y.createTextContent(t),y}return i(e,t),a(e,[{key:"createTextContent",value:function(t){var e=t.className||"ol-plot-text-editor",n=document.createElement("textarea");n.className=e,n.style.width=t.width+"px",n.style.height=t.height+"px",n.style.minHeight=t.minHeight+"px",n.setAttribute("id",t.id),n.setAttribute("autofocus",!0),(0,u.default)(n),(0,f.on)(n,"focus",this.handleFocus_.bind(this)),(0,f.on)(n,"blur",this.handleBlur_.bind(this)),(0,f.on)(n,"click",this.handleClick_.bind(this)),(0,f.on)(n,"mousedown",this.handleDragStart_.bind(this)),(0,f.on)(window,"mouseup",this.handleDragEnd_.bind(this)),this.set("isPlotText",!0),this.setElement(n),this.createCloseButton(t),this.createResizeButton(t),this.setPosition(this._position),this.dispatchEvent("textBoxDrawEnd",{overlay:this,element:n,uuid:t.id})}},{key:"getTextAreaFromContent_",value:function(){var t="",e=Array.prototype.slice.call(this.element&&this.element.children,0);return e.length>0&&e.every(function(e){return 1!==e.nodeType||"textarea"!==e.nodeName.toLowerCase()||(t=e,!1)}),t}},{key:"createCloseButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-close",e.setAttribute("data-id",t.id),(0,f.off)(e,"click",this.closeCurrentPlotText.bind(this)),(0,f.on)(e,"click",this.closeCurrentPlotText.bind(this)),this.element.appendChild(e)}},{key:"createResizeButton",value:function(t){var e=document.createElement("span");e.className="ol-plot-text-editor-resize",e.setAttribute("data-id",t.id),(0,f.off)(e,"mousedown",this.handleResizeMouseDown_.bind(this)),(0,f.off)(e,"mousemove",this.handleResizeMouseMove_.bind(this)),(0,f.on)(e,"mousedown",this.handleResizeMouseDown_.bind(this)),(0,f.on)(e,"mousemove",this.handleResizeMouseMove_.bind(this)),this.element.appendChild(e)}},{key:"resizeButtonMoveHandler_",value:function(t){var e=t.pixel,n=this.getTextAreaFromContent_();if(!(e.length<1||this.currentPixel_.length<1)&&n){var o=[e[0]-this.currentPixel_[0],e[1]-this.currentPixel_[1]],r=[n.offsetWidth,n.offsetHeight],i=r[0]+2*o[0],a=r[1]+2*o[1];(0,f.setStyle)(n,"width",i+"px"),(0,f.setStyle)(n,"height",a+"px"),this.currentPixel_=e,this.getMap().render()}}},{key:"handleResizeMouseMove_",value:function(t){t.stopImmediatePropagation()}},{key:"handleResizeMouseDown_",value:function(t){this.getMap()&&(this.currentPixel_=[t.x,t.y],this.getMap().on("pointermove",this.resizeButtonMoveHandler_,this),(0,f.on)(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)))}},{key:"handleResizeMouseUp_",value:function(t){this.getMap()&&(this.getMap().un("pointermove",this.resizeButtonMoveHandler_,this),(0,f.off)(this.getMap().getViewport(),"mouseup",this.handleResizeMouseUp_.bind(this)),this.currentPixel_=[])}},{key:"closeCurrentPlotText",value:function(t){if(this.getMap()&&t&&(0,f.hasClass)(t.target,"ol-plot-text-editor-close")){var e=t.target.getAttribute("data-id");if(e){var n=this.getMap().getOverlayById(e);n&&this.getMap().removeOverlay(n)}}}},{key:"handleFocus_",value:function(){this.isFocus_=!0,this.getMap()&&(this.getMap().set("activeTextArea",this),this.getMap().dispatchEvent("activeTextArea"))}},{key:"handleBlur_",value:function(){this.isFocus_=!1,this.getMap()&&(this.getMap().set("activeTextArea",null),this.getMap().set("disActiveTextArea",this),this.getMap().dispatchEvent("disActiveTextArea"))}},{key:"handleDragStart_",value:function(t){var e=this;this.getMap()&&!this.dragging_&&this.isMoveModel()&&this.isFocus_&&(this.handleTimer_=window.setTimeout(function(){window.clearTimeout(e.handleTimer_),e.handleTimer_=null,e.isClick_||(e.dragging_=!0,e.disableMapDragPan(),e.preCursor_=e.element.style.cursor,(0,f.on)(e.getMap().getViewport(),"mousemove",e.handleDragDrag_.bind(e)),(0,f.on)(e.element,"mouseup",e.handleDragEnd_.bind(e)))},300))}},{key:"handleDragDrag_",value:function(t){this.dragging_&&(this.element.style.cursor="move",this._position=this.getMap().getCoordinateFromPixel([t.clientX,t.clientY]),this.setPosition(this._position))}},{key:"handleDragEnd_",value:function(t){this.isClick_=!1,window.clearTimeout(this.handleTimer_),this.handleTimer_=null,this.dragging_&&this.isFocus_&&(this.dragging_=!1,this.enableMapDragPan(),this.element.style.cursor=this.preCursor_,(0,f.off)(this.getMap().getViewport(),"mousemove",this.handleDragDrag_.bind(this)),(0,f.off)(this.element,"mouseup",this.handleDragEnd_.bind(this)))}},{key:"handleClick_",value:function(t){t.target===this.element?this.isClick_=!0:this.isClick_=!1}},{key:"isMoveModel",value:function(){return window.getSelection().getRangeAt(0).collapsed}},{key:"setStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getTextAreaFromContent_();if(e)for(var n in t)t[n]&&(0,f.setStyle)(e,n,t[n])}},{key:"getStyle",value:function(){var t={},e=this.getTextAreaFromContent_();if(e)for(var n in l.DEF_TEXT_STYEL)t[n]=(0,f.getStyle)(e,n);return t}},{key:"setValue",value:function(t){var e=this.getTextAreaFromContent_();e&&(e.value=t,t&&u.default.update(e),this.getMap().render())}},{key:"getValue",value:function(){var t=this.getTextAreaFromContent_();return t?t.value:""}},{key:"getWidth",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetWidth?t.offsetWidth:0}},{key:"getHeight",value:function(){var t=this.getTextAreaFromContent_();return t&&t.offsetHeight?t.offsetHeight:0}},{key:"enableMapDragPan",value:function(){var t=this.getMap();t&&this.mapDragPan&&this.mapDragPan instanceof h&&(t.addInteraction(this.mapDragPan),delete this.mapDragPan)}},{key:"disableMapDragPan",value:function(){var t=this,e=this.getMap();if(e){e.getInteractions().getArray().every(function(n){return!(n instanceof h)||(t.mapDragPan=n,e.removeInteraction(n),!1)})}}},{key:"setMap",value:function(t){ol.Overlay.prototype.setMap.call(this,t),t&&t instanceof ol.Map&&(this.setStyle((0,c.merge)(l.DEF_TEXT_STYEL,this.options_.style)),this.setValue(this.options_.value))}}]),e}(ol.Overlay);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(43),l=n(42),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),f=n(40),h=o(f),p=n(143),d=o(p),y=n(45),g=o(y),v=n(44),m=o(v),b=n(41),w=o(b),P=n(4),_=function(t){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");if(a.map=t,!(n&&n instanceof ol.layer.Vector))throw new Error("缺少必要矢量图层！");return a.vectorLayer=n,a.mapViewport=a.map.getViewport(),a.options=o,a.textOverlay=null,a.draw=null,a.coordinate_=null,a.isMoveing=!1,a._uuid=(0,u.getuuid)(),a.activeInteraction(),a.map.getView().on("change:resolution",a._handleResolutionChange,a),m.default.call(a),a}return a(e,t),s(e,[{key:"activeInteraction",value:function(){this.draw=new ol.interaction.Draw({style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.7)"}),stroke:new ol.style.Stroke({color:"rgba(255, 0, 0, 0.8)",width:2}),image:new ol.style.Icon({anchor:[1,1],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:.75,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4T41T0W3CQAy1lfwRqR0h/CE5UhkBJmiZADpB0wlKJwA2aDegE5QR+Igl/noj9OPuLydXPuXQEYUKS5FyPvvd87ONRDRFxEdr7c4Y8ws3WFmW90VRvIjIF1ZVtQaANxH59N6v8zwvRaQEgCMATDu88I+Ipm1bk2XZHhEfAOAdFW00Gh2YOQafOeidHoaYEdGHc65GDZhMJuXpdDJ99hqkPmZe9e9iTgCoqmrWNM0hDerq/FGftXbcZxFzAgARrZg5vBaNiGpE3OhZRF6Zedu7DzkRYMrMKlQKYBBRQVVgw8zj3n3IGWSg9ESkds6tiqJQbe4AYJ6WGVkPAqh4+romdP9LbXMqZh/gXIKqm+d5EK9vbduOY7d0AAdL6AYLmqbRAQtGRMc4ONF/wSC2RF/PsuwbABapqLEjKqb3fq4sLtoYh6Lbiydr7TbtuwYDgH5qB9XmPEjdKG+Y+Xmo7ms+Lcs5N0uX6ei9X9y4TGtEXIZlukb7PzbdmNcisv8DtQILak2vZsYAAAAASUVORK5CYII="})}),type:"Circle",geometryFunction:ol.interaction.Draw.createBox()}),this.map.addInteraction(this.draw),this.draw.on("drawend",this.drawEnd,this)}},{key:"_handleResolutionChange",value:function(t){if(this.options.zoomWithView&&this.feature&&this.feature instanceof ol.Feature){var e=this.feature.getProperties(),n=new ol.style.Style({image:new ol.style.Icon({anchor:[1,0],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:.75,src:e.src,scale:e.resolution/t.target.getResolution()})});this.feature.setStyle(n),this.map.render()}}},{key:"drawEnd",value:function(t){if(t&&t.feature){this.map.removeInteraction(this.draw),this.labelGeomtory=t.feature.getGeometry();var e=t.feature.getGeometry().getExtent();this.center=[e[0],e[3]];var n=this.map.getPixelFromCoordinate([e[0],e[1]]),o=this.map.getPixelFromCoordinate([e[2],e[3]]);this.updateTextArea({center:this.center,width:parseInt(Math.abs(n[0]-o[0])),height:parseInt(Math.abs(n[1]-o[1]))}),this.dispatch("TextAreaDrawEnd",t)}else console.info("未获取到要素！")}},{key:"creatTextArea",value:function(t){var e=document.createElement("div");e.className="ol-plot-text-area-content";var n=document.createElement("textarea"),o=document.createElement("span");o.className="ol-plot-text-area-editor",n.style.width=t.width+"px",n.style.height=t.height+"px",n.setAttribute("autofocus",!0),n.setAttribute("id",this._uuid),n.setAttribute("data-coordinates",JSON.stringify(t.center)),n.className="ol-plot-text-area",(0,g.default)(n),c.listen(n,"blur",this.textOnBlur,this),c.listen(n,"focus",this.textOnFocus,this),c.listen(n,"autosize:resized",this.textResized),c.listen(o,h.default.MOUSEDOWN,this.mouseDownHandle_,this),c.addListener(o,"mousemove",this.controlPointMouseMoveHandler2,this),e.appendChild(n),e.appendChild(o),this.textOverlay=new ol.Overlay({id:this._uuid,element:e,position:t.center,positioning:"right-top"}),this.setTextAreaStyle(P.DEF_TEXT_STYEL),this.map.addOverlay(this.textOverlay),this.map.render()}},{key:"mouseDownHandle_",value:function(){this.isMoveing=!0,c.listen(this.mapViewport,h.default.MOUSEMOVE,this.controlPointMouseMoveHandler_,this,!1),c.listen(this.mapViewport,h.default.MOUSEUP,this.controlPointMouseUpHandler_,this,!1)}},{key:"controlPointMouseMoveHandler_",value:function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(this.textOverlay){this.textOverlay.getElement().firstElementChild.setAttribute("data-coordinates",JSON.stringify(e)),this.textOverlay.setPosition(e),this.map.render()}}},{key:"controlPointMouseMoveHandler2",value:function(t){t.stopImmediatePropagation()}},{key:"controlPointMouseUpHandler_",value:function(){this.isMoveing=!1,c.unListen(this.mapViewport,h.default.MOUSEMOVE,this.controlPointMouseMoveHandler_,this),c.unListen(this.mapViewport,h.default.MOUSEUP,this.controlPointMouseUpHandler_,this)}},{key:"textOnBlur",value:function(t){var e=this;this.isMoveing||this.getImage(t.target).then(function(t){var n=e.textOverlay.getElement(),o=n.firstElementChild,r=o.getAttribute("data-coordinates");e.feature=new ol.Feature({geometry:new ol.geom.Point(JSON.parse(r))});var i=new ol.Feature({geometry:e.labelGeomtory});e.feature.setId(e._uuid),e.feature.setProperties({coordinates:JSON.parse(r),isPlotText:!0,layerName:e.vectorLayer.get("layerName"),id:e._uuid,src:t.src,resolution:e.map.getView().getResolution(),labelFeature:i});var a=new ol.style.Style({image:new ol.style.Icon({anchor:[0,0],anchorXUnits:"fraction",anchorYUnits:"fraction",opacity:.75,src:t.src})});i.setStyle(new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0)"}),stroke:new ol.style.Stroke({color:"rgba(255, 0, 0, 0)",width:2})})),e.feature.setStyle(a),e.feature.set("_text_area_source_",e),e.feature.set("isPlot",!0),e.vectorLayer.getSource().addFeature(e.feature);var s=e.map.getOverlayById(e._uuid);e.map.removeOverlay(s)})}},{key:"textOnFocus",value:function(t){console.log(t)}},{key:"textResized",value:function(t){this.style.width=parseInt(this.offsetWidth)+"px",this.style.height=parseInt(this.offsetHeight)+"px"}},{key:"updateTextArea",value:function(t){if(this.textOverlay){var e=this.textOverlay.getElement();e.firstElementChild.setAttribute("data-coordinates",JSON.stringify(this.center)),this.textOverlay.setPosition(this.center),this.textOverlay.setElement(e),this.map.render()}else this.creatTextArea(t)}},{key:"getCanvas",value:function(t){try{return(0,d.default)(t)}catch(t){console.log(t)}}},{key:"getImage",value:function(t){try{return(0,d.default)(t).then(function(t){var e=new Image;return e.src=t.toDataURL("image/png"),new Promise(function(t){t(e)})}).catch(function(t){console.info(t)})}catch(t){console.log(t)}}},{key:"featureOnFocus",value:function(){this.textOverlay&&this.textOverlay instanceof ol.Overlay&&(this.map.addOverlay(this.textOverlay),this.vectorLayer.getSource().removeFeature(this.feature),this.map.render())}},{key:"setTextAreaStyle",value:function(t){if(this.textOverlay&&t){var e=this.textOverlay.getElement(),n=e.firstElementChild;for(var o in t)o&&t[o]&&(n.style[o]=t[o]);this.textOverlay.setElement(e),this.map.render()}}},{key:"getGeometry",value:function(){return new ol.geom.Point(this.center)}}]),e}((0,w.default)(m.default));e.default=_,t.exports=e.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.PlotTextBox=e.CurveFlag=e.TriangleFlag=e.RectFlag=e.GatheringPlace=e.TailedSquadCombat=e.SquadCombat=e.TailedAttackArrow=e.AssaultDirection=e.FineArrow=e.StraightArrow=e.DoubleArrow=e.AttackArrow=e.FreePolygon=e.Polygon=e.ClosedCurve=e.Sector=e.Lune=e.Ellipse=e.RectAngle=e.FreeHandLine=e.Curve=e.Circle=e.Arc=e.Polyline=e.Pennant=e.Point=void 0;var r=n(137),i=o(r),a=n(136),s=o(a),u=n(132),l=o(u),c=n(111),f=o(c),h=n(118),p=o(h),d=n(130),y=o(d),g=n(131),v=o(g),m=n(128),b=o(m),w=n(119),P=o(w),_=n(126),O=o(_),k=n(129),x=o(k),E=n(123),T=o(E),C=n(127),S=o(C),M=n(124),A=o(M),L=n(28),I=o(L),j=n(113),F=o(j),R=n(115),D=o(R),N=n(60),B=o(N),H=n(112),W=o(H),U=n(116),V=o(U),z=n(114),G=o(z),Y=n(117),X=o(Y),q=n(125),Q=o(q),K=n(121),Z=o(K),J=n(122),$=o(J),tt=n(120),et=o(tt),nt=n(133),ot=o(nt);e.Point=i.default,e.Pennant=s.default,e.Polyline=l.default,e.Arc=f.default,e.Circle=p.default,e.Curve=y.default,e.FreeHandLine=v.default,e.RectAngle=b.default,e.Ellipse=P.default,e.Lune=O.default,e.Sector=x.default,e.ClosedCurve=T.default,e.Polygon=S.default,e.FreePolygon=A.default,e.AttackArrow=I.default,e.DoubleArrow=F.default,e.StraightArrow=D.default,e.FineArrow=B.default,e.AssaultDirection=W.default,e.TailedAttackArrow=V.default,e.SquadCombat=G.default,e.TailedSquadCombat=X.default,e.GatheringPlace=Q.default,e.RectFlag=Z.default,e.TriangleFlag=$.default,e.CurveFlag=et.default,e.PlotTextBox=ot.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.PENNANT,a.options=i||{},a.set("params",a.options),n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){this.setCoordinates(this.points)}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Point);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(0),u=function(t){function e(t,n,i){o(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[]));return a.type=s.POINT,a.options=i||{},a.set("params",a.options),a.fixPointCount=1,n&&n.length>0?a.setPoints(n):t&&t.length>0&&a.setCoordinates(t),a}return i(e,t),a(e,[{key:"getPlotType",value:function(){return this.type}},{key:"generate",value:function(){var t=this.points[0];this.setCoordinates(t)}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}},{key:"isPlot",value:function(){return!0}},{key:"setPoints",value:function(t){this.points=t||[],this.points.length>=1&&this.generate()}},{key:"getPoints",value:function(){return this.points.slice(0)}},{key:"getPointCount",value:function(){return this.points.length}},{key:"updatePoint",value:function(t,e){e>=0&&e<this.points.length&&(this.points[e]=t,this.generate())}},{key:"updateLastPoint",value:function(t){this.updatePoint(t,this.points.length-1)}},{key:"finishDrawing",value:function(){}}]),e}(ol.geom.Point);e.default=u,t.exports=e.default},function(t,e,n){"use strict";function o(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function r(t,e){if(t){for(var n=t.className,r=(e||"").split(" "),i=0,a=r.length;i<a;i++){var s=r[i];s&&(t.classList?t.classList.add(s):o(t,s)||(n+=" "+s))}t.classList||(t.className=n)}}function i(t,e){if(t&&e){for(var n=e.split(" "),r=" "+t.className+" ",i=0,a=n.length;i<a;i++){var s=n[i];s&&(t.classList?t.classList.remove(s):o(t,s)&&(r=r.replace(" "+s+" "," ")))}t.classList||(t.className=f(r))}}function a(t,e){if(!t||!e)return null;"float"===(e=h(e))&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(n){return t.style[e]}}function s(t,e,n){if(t&&e)if("object"===(void 0===e?"undefined":u(e)))for(var o in e)e.hasOwnProperty(o)&&s(t,o,e[o]);else e=h(e),"opacity"===e?t.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":t.style[e]=n}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=o,e.addClass=r,e.removeClass=i,e.getStyle=a,e.setStyle=s;var l=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/,f=(e.create=function(t,e,n,o){var r=document.createElement(t);return r.className=e||"",o&&(r.id=o),n&&n.appendChild(r),r},e.getElement=function(t){return"string"==typeof t?document.getElementById(t):t},e.remove=function(t){var e=t.parentNode;e&&e.removeChild(t)},e.empty=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.createHidden=function(t,e,n){var o=document.createElement(t);return o.style.display="none",n&&(o.id=n),e&&e.appendChild(o),o},function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}),h=function(t){return t.replace(l,function(t,e,n,o){return o?n.toUpperCase():n}).replace(c,"Moz$1")},p=e.on=function(){if(document.addEventListener)return function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}}(),d=e.off=function(){if(document.removeEventListener)return function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}}();e.once=function(t,e,n){p(t,e,function o(){n&&n.apply(this,arguments),d(t,e,o)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};ol.style.Factory=function(t){var e=t&&"object"===(void 0===t?"undefined":o(t))?t:{},n=new ol.style.Style({});return e.geometry&&e.geometry instanceof ol.geom.Geometry&&n.setGeometry(e.geometry),e.zIndex&&"number"==typeof e.zIndex&&n.setZIndex(e.zIndex),e.fill&&"object"===o(e.fill)&&n.setFill(this._getFill(e.fill)),e.image&&"object"===o(e.image)&&n.setImage(this._getImage(e.image)),e.stroke&&"object"===o(e.stroke)&&n.setStroke(this._getStroke(e.stroke)),e.text&&"object"===o(e.text)&&n.setText(this._getText(e.text)),n},ol.style.Factory.prototype._getRegularShape=function(t){try{return new ol.style.RegularShape({fill:this._getFill(t.fill)||void 0,points:"number"==typeof t.points?t.points:1,radius:"number"==typeof t.radius?t.radius:void 0,radius1:"number"==typeof t.radius1?t.radius1:void 0,radius2:"number"==typeof t.radius2?t.radius2:void 0,angle:"number"==typeof t.angle?t.angle:0,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,stroke:this._getStroke(t.stroke)||void 0,rotation:"number"==typeof t.rotation?t.rotation:0,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,atlasManager:t.atlasManager?t.atlasManager:void 0})}catch(t){console.log(t)}},ol.style.Factory.prototype._getImage=function(t){try{return t=t||{},"icon"===t.type?this._getIcon(t.image):this._getRegularShape(t.image)}catch(t){console.log(t)}},ol.style.Factory.prototype._getIcon=function(t){try{t=t||{};return new ol.style.Icon({anchor:t.imageAnchor?t.imageAnchor:[.5,.5],anchorXUnits:t.imageAnchorXUnits?t.imageAnchorXUnits:"fraction",anchorYUnits:t.imageAnchorYUnits?t.imageAnchorYUnits:"fraction",anchorOrigin:t.imageAnchorOrigin?t.imageAnchorYUnits:"top-left",color:t.imageColor?t.imageColor:void 0,crossOrigin:t.crossOrigin?t.crossOrigin:void 0,img:t.img?t.img:void 0,offset:t.offset&&Array.isArray(t.offset)&&2===t.offset.length?t.offset:[0,0],offsetOrigin:t.offsetOrigin?t.offsetOrigin:"top-left",scale:"number"==typeof t.scale?t.scale:1,snapToPixel:"boolean"!=typeof t.snapToPixel||t.snapToPixel,rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,opacity:"number"==typeof t.imageOpacity?t.imageOpacity:1,rotation:"number"==typeof t.imageRotation?t.imageRotation:0,size:t.size&&Array.isArray(t.size)&&2===t.size.length?t.size:void 0,imgSize:t.imgSize&&Array.isArray(t.imgSize)&&2===t.imgSize.length?t.imgSize:void 0,src:t.imageSrc?t.imageSrc:void 0})}catch(t){console.log(t)}},ol.style.Factory.prototype._getStroke=function(t){try{t=t||{};return new ol.style.Stroke({color:t.strokeColor?t.strokeColor:void 0,lineCap:t.strokeLineCap&&"string"==typeof t.strokeLineCap?t.strokeLineCap:"round",lineJoin:t.strokeLineJoin&&"string"==typeof t.strokeLineJoin?t.strokeLineJoin:"round",lineDash:t.strokeLineDash?t.strokeLineDash:void 0,lineDashOffset:"number"==typeof t.strokeLineDashOffset?t.strokeLineDashOffset:"0",miterLimit:"number"==typeof t.strokeMiterLimit?t.strokeMiterLimit:10,width:"number"==typeof t.strokeWidth?t.strokeWidth:void 0})}catch(t){console.log(t)}},ol.style.Factory.prototype._getText=function(t){try{return new ol.style.Text({font:t.textFont&&"string"==typeof t.textFont?t.textFont:"10px sans-serif",offsetX:"number"==typeof t.textOffsetX?t.textOffsetX:0,offsetY:"number"==typeof t.textOffsetY?t.textOffsetY:0,scale:"number"==typeof t.textScale?t.textScale:void 0,rotation:"number"==typeof t.textRotation?t.textRotation:0,text:t.text&&"string"==typeof t.text?t.text:void 0,textAlign:t.textAlign&&"string"==typeof t.textAlign?t.textAlign:"start",textBaseline:t.textBaseline&&"string"==typeof t.textBaseline?t.textBaseline:"alphabetic",rotateWithView:"boolean"==typeof t.rotateWithView&&t.rotateWithView,fill:this._getFill(t.textFill),stroke:this._getStroke(t.textStroke)})}catch(t){console.log(t)}},ol.style.Factory.prototype._getFill=function(t){try{t=t||{};return new ol.style.Fill({color:t.fillColor?t.fillColor:void 0})}catch(t){console.log(t)}};var r=ol.style.Factory;e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.qwStyle=function(t,e){var n=t.getGeometry().getCoordinates();if(n.length<2)return null;var o=n[n.length-2],r=t.getGeometry().getLastCoordinate(),i=r[0]-o[0],a=r[1]-o[1],s=Math.atan2(a,i),u=document.createElement("canvas");u.width=16,u.height=16;var l=u.getContext("2d");return l.strokeStyle="#FF0D3B",l.fillStyle="#FF0D3B",l.lineWidth=1,l.beginPath(),l.moveTo(0,0),l.lineTo(16,8),l.lineTo(0,16),l.fill(),l.stroke(),[new ol.style.Style({geometry:new ol.geom.Point(t.getGeometry().getFirstCoordinate()),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#FF0D3B"})})}),new ol.style.Style({geometry:new ol.geom.Point(t.getGeometry().getLastCoordinate()),image:new ol.style.Icon({img:u,rotateWithView:!0,rotation:-s,imgSize:[16,16]})}),new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(255,13,59,1)",width:3})})]},e.rxStyle=function(t,e){return new ol.style.Style({stroke:new ol.style.Stroke({lineDash:[30,10,20,10],color:"rgba(0,255,132,1)",width:3})})},e.jyStyle=function(t,e){return new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(220,220,13,1)",width:3})})},e.sdStyle=function(t,e){return[new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(10,203,200,1)",width:3})}),new ol.style.Style({geometry:new ol.geom.Point(t.getGeometry().getFirstCoordinate()),image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#0ACBC8"})})})]},e.flStyle=function(t,e){return new ol.style.Style({stroke:new ol.style.Stroke({lineDash:[10,10],color:"rgba(255,150,0,1)",width:3})})},e.hxqStyle=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,13,59,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(255,13,59,1)",width:3})})},e.wwqStyle=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(220,220,13,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(220,220,13,1)",width:3})})},e.sdqStyle=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(0,255,132,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(0,255,132,1)",width:3})})},e.jcqStyle=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(10,203,200,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(10,203,200,1)",width:3})})},e.jldd1Style=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(0,255,132,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.7)",width:3})})},e.jldd2Style=function(t,e){return new ol.style.Style({fill:new ol.style.Fill({color:"rgba(220,220,13,0.5)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.7)",width:3})})}},function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=n(135),s=o(a),u=n(0),l=o(u),c=function(){function t(e){if(r(this,t),this.version="1.0.0",!(e&&e instanceof ol.Map))throw new Error("缺少地图对象！");this.map=e}return i(t,[{key:"createPlot",value:function(t,e,n){var o=n||{};switch(t){case l.ARC:return new s.Arc([],e,o);case l.ASSAULT_DIRECTION:return new s.AssaultDirection([],e,o);case l.ATTACK_ARROW:return new s.AttackArrow([],e,o);case l.DOUBLE_ARROW:return new s.DoubleArrow([],e,o);case l.FINE_ARROW:return new s.FineArrow([],e,o);case l.SQUAD_COMBAT:return new s.SquadCombat([],e,o);case l.STRAIGHT_ARROW:return new s.StraightArrow([],e,o);case l.TAILED_ATTACK_ARROW:return new s.TailedAttackArrow([],e,o);case l.TAILED_SQUAD_COMBAT:return new s.TailedSquadCombat([],e,o);case l.CIRCLE:return new s.Circle([],e,o);case l.ELLIPSE:return new s.Ellipse([],e,o);case l.CURVEFLAG:return new s.CurveFlag([],e,o);case l.RECTFLAG:return new s.RectFlag([],e,o);case l.TRIANGLEFLAG:return new s.TriangleFlag([],e,o);case l.PENNANT:return new s.Pennant([],e,o);case l.POINT:return new s.Point([],e,o);case l.CLOSED_CURVE:return new s.ClosedCurve([],e,o);case l.FREE_POLYGON:return new s.FreePolygon([],e,o);case l.GATHERING_PLACE:return new s.GatheringPlace([],e,o);case l.LUNE:return new s.Lune([],e,o);case l.POLYGON:return new s.Polygon([],e,o);case l.RECTANGLE:return new s.RectAngle([],e,o);case l.SECTOR:return new s.Sector([],e,o);case l.CURVE:return new s.Curve([],e,o);case l.FREEHANDLINE:return new s.FreeHandLine([],e,o);case l.POLYLINE:return new s.Polyline([],e,o);case l.TextArea:return"TextArea"}return null}},{key:"setMap",value:function(t){if(!(t&&t instanceof ol.Map))throw new Error("传入的不是地图对象！");this.map=t}},{key:"getMap",value:function(){return this.map}}]),t}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n(68),n(63),n(64),n(62);var i=n(65),a=o(i),s=n(66),u=o(s),l=n(67),c=o(l),f=n(0),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(f),p=function t(e){r(this,t),this.plotDraw=new a.default(e),this.plotEdit=new u.default(e),this.plotUtils=new c.default(e,this.plotDraw.layerName)};p.PlotTypes=h,e.default=p,t.exports=e.default},function(t,e,n){"use strict";(function(n){var o,r,i,a,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){if("object"===s(e)&&void 0!==t)t.exports=n();else{r=[],o=n,void 0!==(i="function"==typeof o?o.apply(e,r):o)&&(t.exports=i)}}(function(){var t;return function t(e,n,o){function r(s,u){if(!n[s]){if(!e[s]){var l="function"==typeof a&&a;if(!u&&l)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return r(n||t)},f,f.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof a&&a,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,o,r){(function(e){!function(n){function i(t){throw new RangeError(F[t])}function a(t,e){for(var n=t.length,o=[];n--;)o[n]=e(t[n]);return o}function u(t,e){var n=t.split("@"),o="";return n.length>1&&(o=n[0]+"@",t=n[1]),t=t.replace(j,"."),o+a(t.split("."),e).join(".")}function l(t){for(var e,n,o=[],r=0,i=t.length;r<i;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<i?(n=t.charCodeAt(r++),56320==(64512&n)?o.push(((1023&e)<<10)+(1023&n)+65536):(o.push(e),r--)):o.push(e);return o}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function f(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:k}function h(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function p(t,e,n){var o=0;for(t=n?D(t/C):t>>1,t+=D(t/e);t>R*E>>1;o+=k)t=D(t/R);return D(o+(R+1)*t/(t+T))}function d(t){var e,n,o,r,a,s,u,l,h,d,y=[],g=t.length,v=0,m=M,b=S;for(n=t.lastIndexOf(A),n<0&&(n=0),o=0;o<n;++o)t.charCodeAt(o)>=128&&i("not-basic"),y.push(t.charCodeAt(o));for(r=n>0?n+1:0;r<g;){for(a=v,s=1,u=k;r>=g&&i("invalid-input"),l=f(t.charCodeAt(r++)),(l>=k||l>D((O-v)/s))&&i("overflow"),v+=l*s,h=u<=b?x:u>=b+E?E:u-b,!(l<h);u+=k)d=k-h,s>D(O/d)&&i("overflow"),s*=d;e=y.length+1,b=p(v-a,e,0==a),D(v/e)>O-m&&i("overflow"),m+=D(v/e),v%=e,y.splice(v++,0,m)}return c(y)}function y(t){var e,n,o,r,a,s,u,c,f,d,y,g,v,m,b,w=[];for(t=l(t),g=t.length,e=M,n=0,a=S,s=0;s<g;++s)(y=t[s])<128&&w.push(N(y));for(o=r=w.length,r&&w.push(A);o<g;){for(u=O,s=0;s<g;++s)(y=t[s])>=e&&y<u&&(u=y);for(v=o+1,u-e>D((O-n)/v)&&i("overflow"),n+=(u-e)*v,e=u,s=0;s<g;++s)if(y=t[s],y<e&&++n>O&&i("overflow"),y==e){for(c=n,f=k;d=f<=a?x:f>=a+E?E:f-a,!(c<d);f+=k)b=c-d,m=k-d,w.push(N(h(d+b%m,0))),c=D(b/m);w.push(N(h(c,0))),a=p(n,v,o==r),n=0,++o}++n,++e}return w.join("")}function g(t){return u(t,function(t){return L.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return u(t,function(t){return I.test(t)?"xn--"+y(t):t})}var m="object"==(void 0===r?"undefined":s(r))&&r&&!r.nodeType&&r,b="object"==(void 0===o?"undefined":s(o))&&o&&!o.nodeType&&o,w="object"==(void 0===e?"undefined":s(e))&&e;w.global!==w&&w.window!==w&&w.self!==w||(n=w);var P,_,O=2147483647,k=36,x=1,E=26,T=38,C=700,S=72,M=128,A="-",L=/^xn--/,I=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=k-x,D=Math.floor,N=String.fromCharCode;if(P={version:"1.3.2",ucs2:{decode:l,encode:c},decode:d,encode:y,toASCII:v,toUnicode:g},"function"==typeof t&&"object"==s(t.amd)&&t.amd)t("punycode",function(){return P});else if(m&&b)if(o.exports==m)b.exports=P;else for(_ in P)P.hasOwnProperty(_)&&(m[_]=P[_]);else n.punycode=P}(this)}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){function o(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function r(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){s("Unable to copy canvas content from",t,e)}}function i(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),o=t.firstChild;o;)!0!==e&&1===o.nodeType&&"SCRIPT"===o.nodeName||n.appendChild(i(o,e)),o=o.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?r(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}function a(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)a(e),e=e.nextSibling}}var s=t("./log");e.exports=function(t,e,n,r,s,u,l){var c=i(t.documentElement,s.javascriptEnabled),f=e.createElement("iframe");return f.className="html2canvas-container",f.style.visibility="hidden",f.style.position="fixed",f.style.left="-10000px",f.style.top="0px",f.style.border="0",f.width=n,f.height=r,f.scrolling="no",e.body.appendChild(f),new Promise(function(e){var n=f.contentWindow.document;f.contentWindow.onload=f.onload=function(){var t=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(t),"view"===s.type&&(f.contentWindow.scrollTo(u,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||f.contentWindow.scrollY===l&&f.contentWindow.scrollX===u||(n.documentElement.style.top=-l+"px",n.documentElement.style.left=-u+"px",n.documentElement.style.position="absolute")),e(f))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),o(t,u,l),n.replaceChild(n.adoptNode(c),n.documentElement),n.close()})}},{"./log":13}],3:[function(t,e,n){function o(t){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}o.prototype.darken=function(t){var e=1-t;return new o([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},o.prototype.isTransparent=function(){return 0===this.a},o.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},o.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var r=/^#([a-f0-9]{3})$/i;o.prototype.hex3=function(t){var e=null;return null!==(e=t.match(r))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var i=/^#([a-f0-9]{6})$/i;o.prototype.hex6=function(t){var e=null;return null!==(e=t.match(i))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;o.prototype.rgb=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;o.prototype.rgba=function(t){var e=null;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},o.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},o.prototype.namedColor=function(t){t=t.toLowerCase();var e=u[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},o.prototype.isColor=!0;var u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=o},{}],4:[function(e,n,o){function r(t,e){var n=O++;if(e=e||{},e.logging&&(v.options.logging=!0,v.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:p,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var o=null!=e.width?e.width:window.innerWidth,r=null!=e.height?e.height:window.innerHeight;return w(f(t),e.proxy,document,o,r,e).then(function(t){return a(t.contentWindow.document.documentElement,t,e,o,r)})}var s=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(_+n,n),i(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(t){return"function"==typeof e.onrendered&&(v("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function i(t,e,n,o,r){return b(t,t,n,o,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(i){v("Document cloned");var s=_+r,u="["+s+"='"+r+"']";t.querySelector(u).removeAttribute(s);var l=i.contentWindow,c=l.document.querySelector(u);return("function"==typeof e.onclone?Promise.resolve(e.onclone(l.document)):Promise.resolve(!0)).then(function(){return a(c,i,e,n,o)})})}function a(t,e,n,o,r){var i=e.contentWindow,a=new h(i.document),f=new d(n,a),p=P(t),g="view"===n.type?o:l(i.document),m="view"===n.type?r:c(i.document),b=new n.renderer(g,m,f,n,document);return new y(t,b,a,f,n).ready.then(function(){v("Finished rendering");var o;return o="view"===n.type?u(b.canvas,{width:b.canvas.width,height:b.canvas.height,top:0,left:0,x:0,y:0}):t===i.document.body||t===i.document.documentElement||null!=n.canvas?b.canvas:u(b.canvas,{width:null!=n.width?n.width:p.width,height:null!=n.height?n.height:p.height,top:p.top,left:p.left,x:0,y:0}),s(e,n),o})}function s(t,e){e.removeContainer&&(t.parentNode.removeChild(t),v("Cleaned up container"))}function u(t,e){var n=document.createElement("canvas"),o=Math.min(t.width-1,Math.max(0,e.left)),r=Math.min(t.width,Math.max(1,e.left+e.width)),i=Math.min(t.height-1,Math.max(0,e.top)),a=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var s=r-o,u=a-i;return v("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",u),v("Resulting crop with width",e.width,"and height",e.height,"with x",o,"and y",i),n.getContext("2d").drawImage(t,o,i,s,u,e.x,e.y,s,u),n}function l(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function c(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function f(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}var h=e("./support"),p=e("./renderers/canvas"),d=e("./imageloader"),y=e("./nodeparser"),g=e("./nodecontainer"),v=e("./log"),m=e("./utils"),b=e("./clone"),w=e("./proxy").loadUrlDocument,P=m.getBounds,_="data-html2canvas-node",O=0;r.CanvasRenderer=p,r.NodeContainer=g,r.log=v,r.utils=m;var k="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;n.exports=k,"function"==typeof t&&t.amd&&t("html2canvas",[],function(){return k})},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){function o(t){if(this.src=t,r("DummyImageContainer for",t),!this.promise||!this.image){r("Initiating DummyImageContainer"),o.prototype.image=new Image;var e=this.image;o.prototype.promise=new Promise(function(t,n){e.onload=t,e.onerror=n,e.src=i(),!0===e.complete&&t(e)})}}var r=t("./log"),i=t("./utils").smallImage;e.exports=o},{"./log":13,"./utils":26}],6:[function(t,e,n){function o(t,e){var n,o,i=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin=0,i.style.padding=0,document.body.appendChild(i),a.src=r(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),i.appendChild(s),i.appendChild(a),n=a.offsetTop-s.offsetTop+1,i.removeChild(s),i.appendChild(document.createTextNode("Hidden Text")),i.style.lineHeight="normal",a.style.verticalAlign="super",o=a.offsetTop-i.offsetTop+1,document.body.removeChild(i),this.baseline=n,this.lineWidth=1,this.middle=o}var r=t("./utils").smallImage;e.exports=o},{"./utils":26}],7:[function(t,e,n){function o(){this.data={}}var r=t("./font");o.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new r(t,e)),this.data[t+"-"+e]},e.exports=o},{"./font":6}],8:[function(t,e,n){function o(e,n,o){this.image=null,this.src=e;var r=this,a=i(e);this.promise=(n?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(o.proxy,a,o)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:o.proxy,javascriptEnabled:o.javascriptEnabled,removeContainer:o.removeContainer,allowTaint:o.allowTaint,imageTimeout:o.imageTimeout/2})}).then(function(t){return r.image=t})}var r=t("./utils"),i=r.getBounds,a=t("./proxy").loadUrlDocument;o.prototype.proxyLoad=function(t,e,n){var o=this.src;return a(o.src,t,o.ownerDocument,e.width,e.height,n)},e.exports=o},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function o(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}o.TYPES={LINEAR:1,RADIAL:2},o.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=o},{}],10:[function(t,e,n){function o(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(o,r){n.image.onload=o,n.image.onerror=r,e&&(n.image.crossOrigin="anonymous"),n.image.src=t,!0===n.image.complete&&o(n.image)})}e.exports=o},{}],11:[function(t,e,n){function o(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var r=t("./log"),i=t("./imagecontainer"),a=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),u=t("./framecontainer"),l=t("./svgcontainer"),c=t("./svgnodecontainer"),f=t("./lineargradientcontainer"),h=t("./webkitgradientcontainer"),p=t("./utils").bind;o.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},o.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},o.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(o){this.imageExists(t,o)||(t.splice(0,0,e.call(this,n)),r("Added image #"+t.length,"string"==typeof o?o.substring(0,100):o))},this)}},o.prototype.hasImageBackground=function(t){return"none"!==t.method},o.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new i(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new i(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new i(e,!0):this.options.proxy?new s(e,this.options.proxy):new a(e):new l(e)}return"linear-gradient"===t.method?new f(t):"gradient"===t.method?new h(t):"svg"===t.method?new c(t.args[0],this.support.svg):"IFRAME"===t.method?new u(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new a(t)},o.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},o.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},o.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},o.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},o.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new a(t.src).promise.then(function(e){t.image=e})})},o.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},o.prototype.fetch=function(t){return this.images=t.reduce(p(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){r("Succesfully loaded image #"+(e+1),t)},function(n){r("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),r("Finished searching images"),this},o.prototype.timeout=function(t,e){var n,o=Promise.race([t.promise,new Promise(function(o,i){n=setTimeout(function(){r("Timed out loading image",t),i(t)},e)})]).then(function(t){return clearTimeout(n),t});return o.catch(function(){clearTimeout(n)}),o},e.exports=o},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){function o(t){r.apply(this,arguments),this.type=r.TYPES.LINEAR;var e=o.REGEXP_DIRECTION.test(t.args[0])||!r.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,o=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=o,this.y1=n;break;case"center":break;default:var r=.01*parseFloat(t,10);if(isNaN(r))break;0===e?(this.y0=r,this.y1=1-this.y0):(this.x0=r,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(r.REGEXP_COLORSTOP),n=+e[2],o=0===n?"%":e[3];return{color:new i(e[1]),stop:"%"===o?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(n,o){return null!==n.stop&&(t.stop=(n.stop-this.colorStops[e-1].stop)/(o+1)+this.colorStops[e-1].stop,!0)},this)},this)}var r=t("./gradientcontainer"),i=t("./color");o.prototype=Object.create(r.prototype),o.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=o},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var o=function t(){t.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-t.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};o.options={logging:!1},e.exports=o},{}],14:[function(t,e,n){function o(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function r(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function i(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}function a(t){return-1!==t.toString().indexOf("%")}function s(t){return t.replace("px","")}function u(t){return parseFloat(t)}var l=t("./color"),c=t("./utils"),f=c.getBounds,h=c.parseBackgrounds,p=c.offsetBounds;o.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},o.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},o.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},o.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},o.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},o.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return void 0===n&&e.some(function(e){return void 0!==(n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===n?null:n},o.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},o.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},o.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new l(this.css(t)))},o.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},o.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},o.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},o.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=h(this.css("backgroundImage")))},o.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&&(n=[n[0],a(n[0])?"auto":n[0]]),n},o.prototype.parseBackgroundSize=function(t,e,n){var o,r,i=this.cssList("backgroundSize",n);if(a(i[0]))o=t.width*parseFloat(i[0])/100;else{if(/contain|cover/.test(i[0])){var s=t.width/t.height,u=e.width/e.height;return s<u^"contain"===i[0]?{width:t.height*u,height:t.height}:{width:t.width,height:t.width/u}}o=parseInt(i[0],10)}return r="auto"===i[0]&&"auto"===i[1]?e.height:"auto"===i[1]?o/e.width*e.height:a(i[1])?t.height*parseFloat(i[1])/100:parseInt(i[1],10),"auto"===i[0]&&(o=r/e.height*e.width),{width:o,height:r}},o.prototype.parseBackgroundPosition=function(t,e,n,o){var r,i,s=this.cssList("backgroundPosition",n);return r=a(s[0])?(t.width-(o||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),i="auto"===s[1]?r/e.width*e.height:a(s[1])?(t.height-(o||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(r=i/e.height*e.width),{left:r,top:i}},o.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},o.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),o=0;n&&o<n.length;o++){var r=n[o].match(this.TEXT_SHADOW_VALUES);e.push({color:new l(r[0]),offsetX:r[1]?parseFloat(r[1].replace("px","")):0,offsetY:r[2]?parseFloat(r[2].replace("px","")):0,blur:r[3]?r[3].replace("px",""):0})}return e},o.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(s).map(u);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},o.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?i(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},o.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?p(this.node):f(this.node))},o.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},o.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=r(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("•")),0===t.length?this.node.placeholder||"":t},o.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,o.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,o.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,o.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=o},{"./color":3,"./utils":26}],15:[function(t,e,n){function o(t,e,n,o,r){H("Starting NodeParser"),this.renderer=e,this.options=r,this.range=null,this.support=n,this.renderQueue=[],this.stack=new X(!0,1,t.ownerDocument,null);var i=new U(t,null);if(r.background&&e.rectangle(0,0,e.width,e.height,new Y(r.background)),t===t.ownerDocument.documentElement){var a=new U(i.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,a.color("backgroundColor"))}i.visibile=i.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=F([i].concat(this.getChildren(i)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new G,H("Fetched nodes, total:",this.nodes.length),H("Calculate overflow clips"),this.calculateOverflowClips(),H("Start fetching images"),this.images=o.fetch(this.nodes.filter(T)),this.ready=this.images.ready.then(Q(function(){return H("Images loaded, starting parsing"),H("Creating stacking contexts"),this.createStackingContexts(),H("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),H("Render queue created with "+this.renderQueue.length+" items"),new Promise(Q(function(t){r.async?"function"==typeof r.async?r.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function r(t){return t.parent&&t.parent.clip.length}function i(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function a(){}function s(t,e,n,o){return t.map(function(r,i){if(r.width>0){var a=e.left,s=e.top,u=e.width,l=e.height-t[2].width;switch(i){case 0:l=t[0].width,r.args=f({c1:[a,s],c2:[a+u,s],c3:[a+u-t[1].width,s+l],c4:[a+t[3].width,s+l]},o[0],o[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:a=e.left+e.width-t[1].width,u=t[1].width,r.args=f({c1:[a+u,s],c2:[a+u,s+l+t[2].width],c3:[a,s+l],c4:[a,s+t[0].width]},o[1],o[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+e.height-t[2].width,l=t[2].width,r.args=f({c1:[a+u,s+l],c2:[a,s+l],c3:[a+t[3].width,s],c4:[a+u-t[3].width,s]},o[2],o[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:u=t[3].width,r.args=f({c1:[a,s+l+t[2].width],c2:[a,s],c3:[a+u,s+t[0].width],c4:[a+u,s+l]},o[3],o[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return r})}function u(t,e,n,o){var r=(Math.sqrt(2)-1)/3*4,i=n*r,a=o*r,s=t+n,u=e+o;return{topLeft:c({x:t,y:u},{x:t,y:u-a},{x:s-i,y:e},{x:s,y:e}),topRight:c({x:t,y:e},{x:t+i,y:e},{x:s,y:u-a},{x:s,y:u}),bottomRight:c({x:s,y:e},{x:s,y:e+a},{x:t+i,y:u},{x:t,y:u}),bottomLeft:c({x:s,y:u},{x:s-i,y:u},{x:t,y:e+a},{x:t,y:e})}}function l(t,e,n){var o=t.left,r=t.top,i=t.width,a=t.height,s=e[0][0]<i/2?e[0][0]:i/2,l=e[0][1]<a/2?e[0][1]:a/2,c=e[1][0]<i/2?e[1][0]:i/2,f=e[1][1]<a/2?e[1][1]:a/2,h=e[2][0]<i/2?e[2][0]:i/2,p=e[2][1]<a/2?e[2][1]:a/2,d=e[3][0]<i/2?e[3][0]:i/2,y=e[3][1]<a/2?e[3][1]:a/2,g=i-c,v=a-p,m=i-h,b=a-y;return{topLeftOuter:u(o,r,s,l).topLeft.subdivide(.5),topLeftInner:u(o+n[3].width,r+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:u(o+g,r,c,f).topRight.subdivide(.5),topRightInner:u(o+Math.min(g,i+n[3].width),r+n[0].width,g>i+n[3].width?0:c-n[3].width,f-n[0].width).topRight.subdivide(.5),bottomRightOuter:u(o+m,r+v,h,p).bottomRight.subdivide(.5),bottomRightInner:u(o+Math.min(m,i-n[3].width),r+Math.min(v,a+n[0].width),Math.max(0,h-n[1].width),p-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:u(o,r+b,d,y).bottomLeft.subdivide(.5),bottomLeftInner:u(o+n[3].width,r+b,Math.max(0,d-n[3].width),y-n[2].width).bottomLeft.subdivide(.5)}}function c(t,e,n,o){var r=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:o,subdivide:function(i){var a=r(t,e,i),s=r(e,n,i),u=r(n,o,i),l=r(a,s,i),f=r(s,u,i),h=r(l,f,i);return[c(t,a,l,h),c(h,f,u,o)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,o.x,o.y])},curveToReversed:function(o){o.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function f(t,e,n,o,r,i,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function h(t,e,n,o,r,i,a){e[0]>0||e[1]>0?(t.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(t),o[1].curveTo(t)):t.push(["line",i,a]),(n[0]>0||n[1]>0)&&t.push(["line",r[0].start.x,r[0].start.y])}function p(t){return t.cssInt("zIndex")<0}function d(t){return t.cssInt("zIndex")>0}function y(t){return 0===t.cssInt("zIndex")}function g(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function v(t){return t instanceof X}function m(t){return t.node.data.trim().length>0}function b(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function w(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius"),o=n.split(" ");return o.length<=1&&(o[1]=o[0]),o.map(L)})}function P(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function _(t){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(t.css("position"))?t.css("zIndex"):"auto")}function O(t){return"static"!==t.css("position")}function k(t){return"none"!==t.css("float")}function x(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function E(t){var e=this;return function(){return!t.apply(e,arguments)}}function T(t){return t.node.nodeType===Node.ELEMENT_NODE}function C(t){return!0===t.isPseudoElement}function S(t){return t.node.nodeType===Node.TEXT_NODE}function M(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function A(t){return t.getOpacity()<1}function L(t){return parseInt(t,10)}function I(t){return t.width}function j(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function F(t){return[].concat.apply([],t)}function R(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}function D(t){for(var e,n=[],o=0,r=!1;t.length;)N(t[o])===r?(e=t.splice(0,o),e.length&&n.push(W.ucs2.encode(e)),r=!r,o=0):o++,o>=t.length&&(e=t.splice(0,o),e.length&&n.push(W.ucs2.encode(e)));return n}function N(t){return-1!==[32,13,10,9,45].indexOf(t)}function B(t){return/[^\u0000-\u00ff]/.test(t)}var H=t("./log"),W=t("punycode"),U=t("./nodecontainer"),V=t("./textcontainer"),z=t("./pseudoelementcontainer"),G=t("./fontmetrics"),Y=t("./color"),X=t("./stackingcontext"),q=t("./utils"),Q=q.bind,K=q.getBounds,Z=q.parseBackgrounds,J=q.offsetBounds;o.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(T(t)){C(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=r(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,C(t)&&t.cleanDOM()}else S(t)&&(t.clip=r(t)?t.parent.clip:[]);C(t)||(t.bounds=null)},this)},o.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(Q(function(){this.asyncRenderer(t,e)},this),0)},o.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},o.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},o.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},o.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),o=this.getPseudoElement(t,":after");n&&e.push(n),o&&e.push(o)}return F(e)},o.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var o=R(n.content),r="url"===o.substr(0,3),a=document.createElement(r?"img":"html2canvaspseudoelement"),s=new z(a,t,e),u=n.length-1;u>=0;u--){var l=i(n.item(u));a.style[l]=n[l]}if(a.className=z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,r)return a.src=Z(o)[0].args[0],[s];var c=document.createTextNode(o);return a.appendChild(c),[s,new V(c,s)]},o.prototype.getChildren=function(t){return F([].filter.call(t.node.childNodes,P).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new V(e,t):new U(e,t)].filter(j);return e.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},o.prototype.newStackingContext=function(t,e){var n=new X(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},o.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){T(t)&&(this.isRootElement(t)||A(t)||_(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):T(t)&&(O(t)&&y(t)||x(t)||k(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},o.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},o.prototype.isRootElement=function(t){return null===t.parent},o.prototype.sortStackingContexts=function(t){t.contexts.sort(M(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},o.prototype.parseTextBounds=function(t){return function(e,n,o){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var r=o.slice(0,n).join("").length;return this.getRangeBounds(t.node,r,e.length)}if(t.node&&"string"==typeof t.node.data){var i=t.node.splitText(e.length),a=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=i,a}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},o.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),o=t.parentNode,r=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),o.replaceChild(n,t);var i=e?J(n):K(n);return o.replaceChild(r,n),i},o.prototype.getRangeBounds=function(t,e,n){var o=this.range||(this.range=t.ownerDocument.createRange());return o.setStart(t,e),o.setEnd(t,e+n),o.getBoundingClientRect()},o.prototype.parse=function(t){var e=t.contexts.filter(p),n=t.children.filter(T),o=n.filter(E(k)),r=o.filter(E(O)).filter(E(g)),i=n.filter(E(O)).filter(k),s=o.filter(E(O)).filter(g),u=t.contexts.concat(o.filter(O)).filter(y),l=t.children.filter(S).filter(m),c=t.contexts.filter(d);e.concat(r).concat(i).concat(s).concat(u).concat(l).concat(c).forEach(function(t){this.renderQueue.push(t),v(t)&&(this.parse(t),this.renderQueue.push(new a))},this)},o.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():S(t)?(C(t.parent)&&t.parent.appendToDOM(),this.paintText(t),C(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(H(t),this.options.strict)throw t}},o.prototype.paintNode=function(t){v(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},o.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(I))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):H("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var o=this.images.get(t.node.src);o?this.renderer.renderImage(t,e,t.borders,o):H("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},o.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),o={width:n-1,height:n-1,top:e.top,left:e.left},r=[3,3],i=[r,r,r,r],a=[1,1,1,1].map(function(t){return{color:new Y("#A5A5A5"),width:t}}),u=l(o,i,a);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(o.left+1,o.top+1,o.width-2,o.height-2,new Y("#DEDEDE")),this.renderer.renderBorders(s(a,o,u,i)),t.node.checked&&(this.renderer.font(new Y("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",o.left+n/6,o.top+n-1))},this)},o.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new Y("#DEDEDE"),1,new Y("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new Y("#424242"))},this)},o.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var n=t.node.ownerDocument,o=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{o.style[e]=t.css(e)}catch(t){H("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var r=t.parseBounds();o.style.position="fixed",o.style.left=r.left+"px",o.style.top=r.top+"px",o.textContent=e,n.body.appendChild(o),this.paintText(new V(o.firstChild,t)),n.body.removeChild(o)}},o.prototype.paintText=function(t){t.applyTextTransform();var e=W.ucs2.decode(t.node.data),n=this.options.letterRendering&&!b(t)||B(t.node.data)?e.map(function(t){return W.ucs2.encode([t])}):D(e),o=t.parent.fontWeight(),r=t.parent.css("fontSize"),i=t.parent.css("fontFamily"),a=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),o,r,i),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){n.map(this.parseTextBounds(t),this).forEach(function(e,o){e&&(this.renderer.text(n[o],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(i,r)))},this)},this)},o.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var $={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};o.prototype.parseBorders=function(t){var e=t.parseBounds(),n=w(t),o=["Top","Right","Bottom","Left"].map(function(e,n){var o=t.css("border"+e+"Style"),r=t.color("border"+e+"Color");"inset"===o&&r.isBlack()&&(r=new Y([255,255,255,r.a]));var i=$[o]?$[o][n]:null;return{width:t.cssInt("border"+e+"Width"),color:i?r[i[0]](i[1]):r,args:null}}),r=l(e,n,o);return{clip:this.parseBackgroundClip(t,r,o,n,e),borders:s(o,e,r,n)}},o.prototype.parseBackgroundClip=function(t,e,n,o,r){var i=t.css("backgroundClip"),a=[];switch(i){case"content-box":case"padding-box":h(a,o[0],o[1],e.topLeftInner,e.topRightInner,r.left+n[3].width,r.top+n[0].width),h(a,o[1],o[2],e.topRightInner,e.bottomRightInner,r.left+r.width-n[1].width,r.top+n[0].width),h(a,o[2],o[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-n[1].width,r.top+r.height-n[2].width),h(a,o[3],o[0],e.bottomLeftInner,e.topLeftInner,r.left+n[3].width,r.top+r.height-n[2].width);break;default:h(a,o[0],o[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),h(a,o[1],o[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),h(a,o[2],o[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),h(a,o[3],o[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return a},e.exports=o},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){function o(t,e,n){var o="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var r=a(o),u=s(e,t,r);return o?c(u):i(n,u,r).then(function(t){return d(t.content)})}function r(t,e,n){var o="crossOrigin"in new Image,r=a(o),u=s(e,t,r);return o?Promise.resolve(u):i(n,u,r).then(function(t){return"data:"+t.type+";base64,"+t.content})}function i(t,e,n){return new Promise(function(o,r){var i=t.createElement("script"),a=function(){delete window.html2canvas.proxy[n],t.body.removeChild(i)};window.html2canvas.proxy[n]=function(t){a(),o(t)},i.src=e,i.onerror=function(t){a(),r(t)},t.body.appendChild(i)})}function a(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++y+"_"+Math.round(1e5*Math.random())}function s(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}function u(t){return function(e){var n,o=new DOMParser;try{n=o.parseFromString(e,"text/html")}catch(t){h("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var r=n.querySelector("base");if(!r||!r.href.host){var i=n.createElement("base");i.href=t,n.head.insertBefore(i,n.head.firstChild)}return n}}function l(t,e,n,r,i,a){return new o(t,e,window.document).then(u(t)).then(function(t){return p(t,n,r,i,a,0,0)})}var c=t("./xhr"),f=t("./utils"),h=t("./log"),p=t("./clone"),d=f.decode64,y=0;n.Proxy=o,n.ProxyURL=r,n.loadUrlDocument=l},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){function o(t,e){var n=document.createElement("a");n.href=t,t=n.href,this.src=t,this.image=new Image;var o=this;this.promise=new Promise(function(n,i){o.image.crossOrigin="Anonymous",o.image.onload=n,o.image.onerror=i,new r(t,e,document).then(function(t){o.image.src=t}).catch(i)})}var r=t("./proxy").ProxyURL;e.exports=o},{"./proxy":16}],18:[function(t,e,n){function o(t,e,n){r.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}var r=t("./nodecontainer");o.prototype.cloneTo=function(t){o.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},o.prototype=Object.create(r.prototype),o.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},o.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},o.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=o},{"./nodecontainer":14}],19:[function(t,e,n){function o(t,e,n,o,r){this.width=t,this.height=e,this.images=n,this.options=o,this.document=r}var r=t("./log");o.prototype.renderImage=function(t,e,n,o){var r=t.cssInt("paddingLeft"),i=t.cssInt("paddingTop"),a=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),u=n.borders,l=e.width-(u[1].width+u[3].width+r+a),c=e.height-(u[0].width+u[2].width+i+s);this.drawImage(o,0,0,o.image.width||l,o.image.height||c,e.left+r+u[3].width,e.top+i+u[0].width,l,c)},o.prototype.renderBackground=function(t,e,n){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},o.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},o.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},o.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},o.prototype.renderBackgroundImage=function(t,e,n){t.parseBackgroundImages().reverse().forEach(function(o,i,a){switch(o.method){case"url":var s=this.images.get(o.args[0]);s?this.renderBackgroundRepeating(t,e,s,a.length-(i+1),n):r("Error loading background-image",o.args[0]);break;case"linear-gradient":case"gradient":var u=this.images.get(o.value);u?this.renderBackgroundGradient(u,e,n):r("Error loading background-image",o.args[0]);break;case"none":break;default:r("Unknown background-image type",o.args[0])}},this)},o.prototype.renderBackgroundRepeating=function(t,e,n,o,r){var i=t.parseBackgroundSize(e,n.image,o),a=t.parseBackgroundPosition(e,n.image,o,i);switch(t.parseBackgroundRepeat(o)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,i,e,e.left+r[3],e.top+a.top+r[0],99999,i.height,r);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,i,e,e.left+a.left+r[3],e.top+r[0],i.width,99999,r);break;case"no-repeat":this.backgroundRepeatShape(n,a,i,e,e.left+a.left+r[3],e.top+a.top+r[0],i.width,i.height,r);break;default:this.renderBackgroundRepeat(n,a,i,{top:e.top,left:e.left},r[3],r[0])}},e.exports=o},{"./log":13}],20:[function(t,e,n){function o(t,e){i.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},u("Initialized CanvasRenderer with size",t,"x",e)}function r(t){return t.length>0}var i=t("../renderer"),a=t("../lineargradientcontainer"),u=t("../log");o.prototype=Object.create(i.prototype),o.prototype.setFillStyle=function(t){return this.ctx.fillStyle="object"===(void 0===t?"undefined":s(t))&&t.isColor?t.toString():t,this.ctx},o.prototype.rectangle=function(t,e,n,o,r){this.setFillStyle(r).fillRect(t,e,n,o)},o.prototype.circle=function(t,e,n,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},o.prototype.circleStroke=function(t,e,n,o,r,i){this.circle(t,e,n,o),this.ctx.strokeStyle=i.toString(),this.ctx.stroke()},o.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},o.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},o.prototype.drawImage=function(t,e,n,o,r,i,a,s,u){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,o,r,i,a,s,u)},o.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(r).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},o.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},o.prototype.font=function(t,e,n,o,r,i){this.setFillStyle(t).font=[e,n,o,r,i].join(" ").split(",")[0]},o.prototype.fontShadow=function(t,e,n,o){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",o)},o.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},o.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},o.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},o.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},o.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},o.prototype.backgroundRepeatShape=function(t,e,n,o,r,i,a,s,u){var l=[["line",Math.round(r),Math.round(i)],["line",Math.round(r+a),Math.round(i)],["line",Math.round(r+a),Math.round(s+i)],["line",Math.round(r),Math.round(s+i)]];this.clip([l],function(){this.renderBackgroundRepeat(t,e,n,o,u[3],u[0])},this)},o.prototype.renderBackgroundRepeat=function(t,e,n,o,r,i){var a=Math.round(o.left+e.left+r),s=Math.round(o.top+e.top+i);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},o.prototype.renderBackgroundGradient=function(t,e){if(t instanceof a){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n)}},o.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;var o,r=document.createElement("canvas");return r.width=e.width,r.height=e.height,o=r.getContext("2d"),o.drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),r},e.exports=o},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){function o(t,e,n,o){r.call(this,n,o),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var r=t("./nodecontainer");o.prototype=Object.create(r.prototype),o.prototype.getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=o},{"./nodecontainer":14}],22:[function(t,e,n){function o(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}o.prototype.testRangeBounds=function(t){var e,n,o,r,i=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),o=e.getBoundingClientRect(),r=o.height,123===r&&(i=!0),t.body.removeChild(n))),i},o.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},o.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=o},{}],23:[function(t,e,n){function o(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):r(t)}).then(function(t){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}var r=t("./xhr"),i=t("./utils").decode64;o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},o.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},o.prototype.createCanvas=function(t){var e=this;return function(n,o){var r=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=r.lowerCanvasEl,r.setWidth(o.width).setHeight(o.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,o)).renderAll(),t(r.lowerCanvasEl)}},o.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):i(t)},e.exports=o},{"./utils":26,"./xhr":28}],24:[function(t,e,n){function o(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,o){n.image=new Image,n.image.onload=e,n.image.onerror=o,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===n.image.complete&&e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}var r=t("./svgcontainer");o.prototype=Object.create(r.prototype),e.exports=o},{"./svgcontainer":23}],25:[function(t,e,n){function o(t,e){i.call(this,t,e)}function r(t,e,n){if(t.length>0)return e+n.toUpperCase()}var i=t("./nodecontainer");o.prototype=Object.create(i.prototype),o.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},o.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,r);case"uppercase":return e.toUpperCase();default:return e}},e.exports=o},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){var e,n,o,r,i,a,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=t.length,f="";for(e=0;e<c;e+=4)n=l.indexOf(t[e]),o=l.indexOf(t[e+1]),r=l.indexOf(t[e+2]),i=l.indexOf(t[e+3]),a=n<<2|o>>4,s=(15&o)<<4|r>>2,u=(3&r)<<6|i,f+=64===r?String.fromCharCode(a):64===i||-1===i?String.fromCharCode(a,s):String.fromCharCode(a,s,u);return f},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,o,r,i,a,s,u=" \r\n\t",l=[],c=0,f=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(r=e.indexOf("-",1)+1)>0&&(o=e.substr(0,r),e=e.substr(r)),l.push({prefix:o,method:e.toLowerCase(),value:i,args:s,image:null})),s=[],e=o=n=i=""};return s=[],e=o=n=i="",t.split("").forEach(function(t){if(!(0===c&&u.indexOf(t)>-1)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===c)return c=1,void(i+=t);f++;break;case")":if(a)break;if(1===c){if(0===f)return c=0,i+=t,void h();f--}break;case",":if(a)break;if(0===c)return void h();if(1===c&&0===f&&!e.match(/^url$/i))return s.push(n),n="",void(i+=t)}i+=t,0===c?e+=t:n+=t}}),h(),l}},{}],27:[function(t,e,n){function o(t){r.apply(this,arguments),this.type="linear"===t.args[0]?r.TYPES.LINEAR:r.TYPES.RADIAL}var r=t("./gradientcontainer");o.prototype=Object.create(r.prototype),e.exports=o},{"./gradientcontainer":9}],28:[function(t,e,n){function o(t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.open("GET",t),o.onload=function(){200===o.status?e(o.responseText):n(new Error(o.statusText))},o.onerror=function(){n(new Error("Network Error"))},o.send()})}e.exports=o},{}]},{},[4])(4)})}).call(e,n(145))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createHidden=e.setClass=e.removeClass=e.addClass=e.hasClass=e.toBack=e.toFront=e.empty=e.remove=e.create=e.getStyle=e.getClass=e.getElementsByClassName=e.getChildByTagName=e.get=void 0;var o=n(43),r=(e.get=function(t){return"string"==typeof t?document.getElementById(t):t},e.getChildByTagName=function(t,e){return e.getElementsByTagName(t)},e.getElementsByClassName=function(t,e,n){var o=n||window;return o.document.querySelector.bind(o.document)(t)},e.getClass=function(t){return t.getAttribute&&t.getAttribute("class")||""}),i=(e.getStyle=function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n},e.create=function(t,e,n,o){var r=document.createElement(t);return r.className=e||"",o&&(r.id=o),n&&n.appendChild(r),r},e.remove=function(t){var e=t.parentNode;e&&e.removeChild(t)},e.empty=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.toFront=function(t){t.parentNode.appendChild(t)},e.toBack=function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},e.hasClass=function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=r(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}),a=(e.addClass=function(t,e){if(void 0!==t.classList)for(var n=(0,o.splitWords)(e),s=0,u=n.length;s<u;s++)t.classList.add(n[s]);else if(!i(t,e)){var l=r(t);a(t,(l?l+" ":"")+e)}},e.removeClass=function(t,e){void 0!==t.classList?t.classList.remove(e):a(t,String.trim((" "+r(t)+" ").replace(" "+e+" "," ")))},e.setClass=function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e});e.createHidden=function(t,e,n){var o=document.createElement(t);return o.style.display="none",n&&(o.id=n),e&&e.appendChild(o),o}},function(t,e,n){"use strict";var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(o=window)}t.exports=o}])});
//# sourceMappingURL=ol-plot.min.js.map